try{self["workbox:core:7.0.0"]&&_()}catch{}const x=(a,...e)=>{let t=a;return e.length>0&&(t+=` :: ${JSON.stringify(e)}`),t},O=x;class l extends Error{constructor(e,t){const s=O(e,t);super(s),this.name=e,this.details=t}}const d={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},C=a=>[d.prefix,a,d.suffix].filter(e=>e&&e.length>0).join("-"),I=a=>{for(const e of Object.keys(d))a(e)},L={updateDetails:a=>{I(e=>{typeof a[e]=="string"&&(d[e]=a[e])})},getGoogleAnalyticsName:a=>a||C(d.googleAnalytics),getPrecacheName:a=>a||C(d.precache),getPrefix:()=>d.prefix,getRuntimeName:a=>a||C(d.runtime),getSuffix:()=>d.suffix};function v(a,e){const t=e();return a.waitUntil(t),t}try{self["workbox:precaching:7.0.0"]&&_()}catch{}const A="__WB_REVISION__";function M(a){if(!a)throw new l("add-to-cache-list-unexpected-type",{entry:a});if(typeof a=="string"){const i=new URL(a,location.href);return{cacheKey:i.href,url:i.href}}const{revision:e,url:t}=a;if(!t)throw new l("add-to-cache-list-unexpected-type",{entry:a});if(!e){const i=new URL(t,location.href);return{cacheKey:i.href,url:i.href}}const s=new URL(t,location.href),n=new URL(t,location.href);return s.searchParams.set(A,e),{cacheKey:s.href,url:n.href}}class S{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:e,state:t})=>{t&&(t.originalRequest=e)},this.cachedResponseWillBeUsed=async({event:e,state:t,cachedResponse:s})=>{if(e.type==="install"&&t&&t.originalRequest&&t.originalRequest instanceof Request){const n=t.originalRequest.url;s?this.notUpdatedURLs.push(n):this.updatedURLs.push(n)}return s}}}class q{constructor({precacheController:e}){this.cacheKeyWillBeUsed=async({request:t,params:s})=>{const n=(s==null?void 0:s.cacheKey)||this._precacheController.getCacheKeyForURL(t.url);return n?new Request(n,{headers:t.headers}):t},this._precacheController=e}}let y;function W(){if(y===void 0){const a=new Response("");if("body"in a)try{new Response(a.body),y=!0}catch{y=!1}y=!1}return y}async function D(a,e){let t=null;if(a.url&&(t=new URL(a.url).origin),t!==self.location.origin)throw new l("cross-origin-copy-response",{origin:t});const s=a.clone(),i={headers:new Headers(s.headers),status:s.status,statusText:s.statusText},r=W()?s.body:await s.blob();return new Response(r,i)}const j=a=>new URL(String(a),location.href).href.replace(new RegExp(`^${location.origin}`),"");function K(a,e){const t=new URL(a);for(const s of e)t.searchParams.delete(s);return t.href}async function H(a,e,t,s){const n=K(e.url,t);if(e.url===n)return a.match(e,s);const i=Object.assign(Object.assign({},s),{ignoreSearch:!0}),r=await a.keys(e,i);for(const c of r){const o=K(c.url,t);if(n===o)return a.match(c,s)}}class F{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}const B=new Set;async function $(){for(const a of B)await a()}function J(a){return new Promise(e=>setTimeout(e,a))}try{self["workbox:strategies:7.0.0"]&&_()}catch{}function R(a){return typeof a=="string"?new Request(a):a}class V{constructor(e,t){this._cacheKeys={},Object.assign(this,t),this.event=t.event,this._strategy=e,this._handlerDeferred=new F,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map;for(const s of this._plugins)this._pluginStateMap.set(s,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){const{event:t}=this;let s=R(e);if(s.mode==="navigate"&&t instanceof FetchEvent&&t.preloadResponse){const r=await t.preloadResponse;if(r)return r}const n=this.hasCallback("fetchDidFail")?s.clone():null;try{for(const r of this.iterateCallbacks("requestWillFetch"))s=await r({request:s.clone(),event:t})}catch(r){if(r instanceof Error)throw new l("plugin-error-request-will-fetch",{thrownErrorMessage:r.message})}const i=s.clone();try{let r;r=await fetch(s,s.mode==="navigate"?void 0:this._strategy.fetchOptions);for(const c of this.iterateCallbacks("fetchDidSucceed"))r=await c({event:t,request:i,response:r});return r}catch(r){throw n&&await this.runCallbacks("fetchDidFail",{error:r,event:t,originalRequest:n.clone(),request:i.clone()}),r}}async fetchAndCachePut(e){const t=await this.fetch(e),s=t.clone();return this.waitUntil(this.cachePut(e,s)),t}async cacheMatch(e){const t=R(e);let s;const{cacheName:n,matchOptions:i}=this._strategy,r=await this.getCacheKey(t,"read"),c=Object.assign(Object.assign({},i),{cacheName:n});s=await caches.match(r,c);for(const o of this.iterateCallbacks("cachedResponseWillBeUsed"))s=await o({cacheName:n,matchOptions:i,cachedResponse:s,request:r,event:this.event})||void 0;return s}async cachePut(e,t){const s=R(e);await J(0);const n=await this.getCacheKey(s,"write");if(!t)throw new l("cache-put-with-no-response",{url:j(n.url)});const i=await this._ensureResponseSafeToCache(t);if(!i)return!1;const{cacheName:r,matchOptions:c}=this._strategy,o=await self.caches.open(r),u=this.hasCallback("cacheDidUpdate"),g=u?await H(o,n.clone(),["__WB_REVISION__"],c):null;try{await o.put(n,u?i.clone():i)}catch(f){if(f instanceof Error)throw f.name==="QuotaExceededError"&&await $(),f}for(const f of this.iterateCallbacks("cacheDidUpdate"))await f({cacheName:r,oldResponse:g,newResponse:i.clone(),request:n,event:this.event});return!0}async getCacheKey(e,t){const s=`${e.url} | ${t}`;if(!this._cacheKeys[s]){let n=e;for(const i of this.iterateCallbacks("cacheKeyWillBeUsed"))n=R(await i({mode:t,request:n,event:this.event,params:this.params}));this._cacheKeys[s]=n}return this._cacheKeys[s]}hasCallback(e){for(const t of this._strategy.plugins)if(e in t)return!0;return!1}async runCallbacks(e,t){for(const s of this.iterateCallbacks(e))await s(t)}*iterateCallbacks(e){for(const t of this._strategy.plugins)if(typeof t[e]=="function"){const s=this._pluginStateMap.get(t);yield i=>{const r=Object.assign(Object.assign({},i),{state:s});return t[e](r)}}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let t=e,s=!1;for(const n of this.iterateCallbacks("cacheWillUpdate"))if(t=await n({request:this.request,response:t,event:this.event})||void 0,s=!0,!t)break;return s||t&&t.status!==200&&(t=void 0),t}}class G{constructor(e={}){this.cacheName=L.getRuntimeName(e.cacheName),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){const[t]=this.handleAll(e);return t}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});const t=e.event,s=typeof e.request=="string"?new Request(e.request):e.request,n="params"in e?e.params:void 0,i=new V(this,{event:t,request:s,params:n}),r=this._getResponse(i,s,t),c=this._awaitComplete(r,i,s,t);return[r,c]}async _getResponse(e,t,s){await e.runCallbacks("handlerWillStart",{event:s,request:t});let n;try{if(n=await this._handle(t,e),!n||n.type==="error")throw new l("no-response",{url:t.url})}catch(i){if(i instanceof Error){for(const r of e.iterateCallbacks("handlerDidError"))if(n=await r({error:i,event:s,request:t}),n)break}if(!n)throw i}for(const i of e.iterateCallbacks("handlerWillRespond"))n=await i({event:s,request:t,response:n});return n}async _awaitComplete(e,t,s,n){let i,r;try{i=await e}catch{}try{await t.runCallbacks("handlerDidRespond",{event:n,request:s,response:i}),await t.doneWaiting()}catch(c){c instanceof Error&&(r=c)}if(await t.runCallbacks("handlerDidComplete",{event:n,request:s,response:i,error:r}),t.destroy(),r)throw r}}class p extends G{constructor(e={}){e.cacheName=L.getPrecacheName(e.cacheName),super(e),this._fallbackToNetwork=e.fallbackToNetwork!==!1,this.plugins.push(p.copyRedirectedCacheableResponsesPlugin)}async _handle(e,t){const s=await t.cacheMatch(e);return s||(t.event&&t.event.type==="install"?await this._handleInstall(e,t):await this._handleFetch(e,t))}async _handleFetch(e,t){let s;const n=t.params||{};if(this._fallbackToNetwork){const i=n.integrity,r=e.integrity,c=!r||r===i;s=await t.fetch(new Request(e,{integrity:e.mode!=="no-cors"?r||i:void 0})),i&&c&&e.mode!=="no-cors"&&(this._useDefaultCacheabilityPluginIfNeeded(),await t.cachePut(e,s.clone()))}else throw new l("missing-precache-entry",{cacheName:this.cacheName,url:e.url});return s}async _handleInstall(e,t){this._useDefaultCacheabilityPluginIfNeeded();const s=await t.fetch(e);if(!await t.cachePut(e,s.clone()))throw new l("bad-precaching-response",{url:e.url,status:s.status});return s}_useDefaultCacheabilityPluginIfNeeded(){let e=null,t=0;for(const[s,n]of this.plugins.entries())n!==p.copyRedirectedCacheableResponsesPlugin&&(n===p.defaultPrecacheCacheabilityPlugin&&(e=s),n.cacheWillUpdate&&t++);t===0?this.plugins.push(p.defaultPrecacheCacheabilityPlugin):t>1&&e!==null&&this.plugins.splice(e,1)}}p.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:a}){return!a||a.status>=400?null:a}};p.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:a}){return a.redirected?await D(a):a}};class Q{constructor({cacheName:e,plugins:t=[],fallbackToNetwork:s=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new p({cacheName:L.getPrecacheName(e),plugins:[...t,new q({precacheController:this})],fallbackToNetwork:s}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(e){this.addToCacheList(e),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(e){const t=[];for(const s of e){typeof s=="string"?t.push(s):s&&s.revision===void 0&&t.push(s.url);const{cacheKey:n,url:i}=M(s),r=typeof s!="string"&&s.revision?"reload":"default";if(this._urlsToCacheKeys.has(i)&&this._urlsToCacheKeys.get(i)!==n)throw new l("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(i),secondEntry:n});if(typeof s!="string"&&s.integrity){if(this._cacheKeysToIntegrities.has(n)&&this._cacheKeysToIntegrities.get(n)!==s.integrity)throw new l("add-to-cache-list-conflicting-integrities",{url:i});this._cacheKeysToIntegrities.set(n,s.integrity)}if(this._urlsToCacheKeys.set(i,n),this._urlsToCacheModes.set(i,r),t.length>0){const c=`Workbox is precaching URLs without revision info: ${t.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(c)}}}install(e){return v(e,async()=>{const t=new S;this.strategy.plugins.push(t);for(const[i,r]of this._urlsToCacheKeys){const c=this._cacheKeysToIntegrities.get(r),o=this._urlsToCacheModes.get(i),u=new Request(i,{integrity:c,cache:o,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:r},request:u,event:e}))}const{updatedURLs:s,notUpdatedURLs:n}=t;return{updatedURLs:s,notUpdatedURLs:n}})}activate(e){return v(e,async()=>{const t=await self.caches.open(this.strategy.cacheName),s=await t.keys(),n=new Set(this._urlsToCacheKeys.values()),i=[];for(const r of s)n.has(r.url)||(await t.delete(r),i.push(r.url));return{deletedURLs:i}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(e){const t=new URL(e,location.href);return this._urlsToCacheKeys.get(t.href)}getIntegrityForCacheKey(e){return this._cacheKeysToIntegrities.get(e)}async matchPrecache(e){const t=e instanceof Request?e.url:e,s=this.getCacheKeyForURL(t);if(s)return(await self.caches.open(this.strategy.cacheName)).match(s)}createHandlerBoundToURL(e){const t=this.getCacheKeyForURL(e);if(!t)throw new l("non-precached-url",{url:e});return s=>(s.request=new Request(e),s.params=Object.assign({cacheKey:t},s.params),this.strategy.handle(s))}}let U;const N=()=>(U||(U=new Q),U);try{self["workbox:routing:7.0.0"]&&_()}catch{}const T="GET",b=a=>a&&typeof a=="object"?a:{handle:a};class m{constructor(e,t,s=T){this.handler=b(t),this.match=e,this.method=s}setCatchHandler(e){this.catchHandler=b(e)}}class X extends m{constructor(e,t,s){const n=({url:i})=>{const r=e.exec(i.href);if(r&&!(i.origin!==location.origin&&r.index!==0))return r.slice(1)};super(n,t,s)}}class Y{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",e=>{const{request:t}=e,s=this.handleRequest({request:t,event:e});s&&e.respondWith(s)})}addCacheListener(){self.addEventListener("message",e=>{if(e.data&&e.data.type==="CACHE_URLS"){const{payload:t}=e.data,s=Promise.all(t.urlsToCache.map(n=>{typeof n=="string"&&(n=[n]);const i=new Request(...n);return this.handleRequest({request:i,event:e})}));e.waitUntil(s),e.ports&&e.ports[0]&&s.then(()=>e.ports[0].postMessage(!0))}})}handleRequest({request:e,event:t}){const s=new URL(e.url,location.href);if(!s.protocol.startsWith("http"))return;const n=s.origin===location.origin,{params:i,route:r}=this.findMatchingRoute({event:t,request:e,sameOrigin:n,url:s});let c=r&&r.handler;const o=e.method;if(!c&&this._defaultHandlerMap.has(o)&&(c=this._defaultHandlerMap.get(o)),!c)return;let u;try{u=c.handle({url:s,request:e,event:t,params:i})}catch(f){u=Promise.reject(f)}const g=r&&r.catchHandler;return u instanceof Promise&&(this._catchHandler||g)&&(u=u.catch(async f=>{if(g)try{return await g.handle({url:s,request:e,event:t,params:i})}catch(k){k instanceof Error&&(f=k)}if(this._catchHandler)return this._catchHandler.handle({url:s,request:e,event:t});throw f})),u}findMatchingRoute({url:e,sameOrigin:t,request:s,event:n}){const i=this._routes.get(s.method)||[];for(const r of i){let c;const o=r.match({url:e,sameOrigin:t,request:s,event:n});if(o)return c=o,(Array.isArray(c)&&c.length===0||o.constructor===Object&&Object.keys(o).length===0||typeof o=="boolean")&&(c=void 0),{route:r,params:c}}return{}}setDefaultHandler(e,t=T){this._defaultHandlerMap.set(t,b(e))}setCatchHandler(e){this._catchHandler=b(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new l("unregister-route-but-not-found-with-method",{method:e.method});const t=this._routes.get(e.method).indexOf(e);if(t>-1)this._routes.get(e.method).splice(t,1);else throw new l("unregister-route-route-not-registered")}}let w;const z=()=>(w||(w=new Y,w.addFetchListener(),w.addCacheListener()),w);function Z(a,e,t){let s;if(typeof a=="string"){const i=new URL(a,location.href),r=({url:c})=>c.href===i.href;s=new m(r,e,t)}else if(a instanceof RegExp)s=new X(a,e,t);else if(typeof a=="function")s=new m(a,e,t);else if(a instanceof m)s=a;else throw new l("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return z().registerRoute(s),s}function ee(a,e=[]){for(const t of[...a.searchParams.keys()])e.some(s=>s.test(t))&&a.searchParams.delete(t);return a}function*te(a,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:t="index.html",cleanURLs:s=!0,urlManipulation:n}={}){const i=new URL(a,location.href);i.hash="",yield i.href;const r=ee(i,e);if(yield r.href,t&&r.pathname.endsWith("/")){const c=new URL(r.href);c.pathname+=t,yield c.href}if(s){const c=new URL(r.href);c.pathname+=".html",yield c.href}if(n){const c=n({url:i});for(const o of c)yield o.href}}class se extends m{constructor(e,t){const s=({request:n})=>{const i=e.getURLsToCacheKeys();for(const r of te(n.url,t)){const c=i.get(r);if(c){const o=e.getIntegrityForCacheKey(c);return{cacheKey:c,integrity:o}}}};super(s,e.strategy)}}function ae(a){const e=N(),t=new se(e,a);Z(t)}function ne(a){N().precache(a)}function ie(a,e){ne(a),ae(e)}function re(){self.addEventListener("activate",()=>self.clients.claim())}console.info("Service worker build 19/08/2024, 12:05");const E=async(a,e)=>{(await self.clients.matchAll({includeUncontrolled:!0,type:"window"})).forEach(s=>{s.postMessage({type:a,message:e})})},h=a=>(console.info(a),E("LOG",a)),ce=a=>"setAppBadge"in self.navigator?self.navigator.setAppBadge(a).then(()=>h("Badge displayed")):(h("Badge API is not available"),Promise.resolve()),oe=async()=>{if("pushManager"in self.registration&&typeof self.registration.pushManager.subscribe=="function"){await h("Registering a push subscription");try{const a=await self.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BGdL595OYfn0whXOJSJfrKsQu0hE4XDm3mH_F8a00cdOqbPXcCyTljPWuIU_inEJNYkmjCUr9eAmiIJnvmkKxVY"});return await h("Subscribed successfully"),await E("SUB"),a}catch(a){await h(`Unable to subscribe. ${a}`)}}return null},le=async()=>{if(Notification.permission!=="granted"){h("No permission to show notifications");return}try{await self.registration.showNotification("Local Notification",{body:"This was sent from service worker, without using Push API",icon:"./icon-192.png"}),h("Local notification is sent successfully")}catch(a){h(`Error sending local notification: ${a}`)}},he=async a=>{const t=await(await fetch("https://rockstar-push.glitch.me/send-push",{method:"post",body:JSON.stringify(a,null,2),headers:{"Content-Type":"application/json"}})).text();await h(`Push request result: ${t}`)};self.skipWaiting();re();ie([{"revision":null,"url":"assets/index-eLEHm5J6.css"},{"revision":null,"url":"assets/index-vvsdBsOw.js"},{"revision":"87ca0fa9368cdce57dba1bdd7b04bf85","url":"index.html"},{"revision":"013de5474500ddbb23aece0dcc0e8f52","url":"registerSW.js"},{"revision":"eeec202140a133160157b38d0870b22b","url":"icon192.png"},{"revision":"0b031c44a66b36fbcea23dac0bcb0b6e","url":"icon512.png"},{"revision":"b8480fab49bd2b641b37c2b14deef198","url":"manifest.webmanifest"}]);let P=null;self.addEventListener("activate",async()=>{h("Service worker is running"),P=await oe()});self.addEventListener("message",a=>{var e,t,s;if(((e=a.data)==null?void 0:e.type)==="SEND_NOTIFICATION"){const n=[];n.push(le()),"setAppBadge"in self.navigator&&n.push(self.navigator.setAppBadge(1)),a.waitUntil(Promise.all(n))}((t=a.data)==null?void 0:t.type)==="REQUEST_PUSH"&&(P?a.waitUntil(he(P)):a.waitUntil(h("Unable to request a push: no subscription"))),((s=a.data)==null?void 0:s.type)==="APP_OPEN"&&"clearAppBadge"in self.navigator&&a.waitUntil(self.navigator.clearAppBadge())});self.addEventListener("push",a=>{var c;h("Received a push message");const e=[],t=ce(1);e.push(t);const{title:s="Empty message",body:n="Empty message"}=((c=a.data)==null?void 0:c.json())||{},i=self.registration.showNotification(s,{body:n});e.push(i);const r=Promise.all(e).catch(o=>h(`Push processing failed. ${o}`));a.waitUntil(r)});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic2VydmljZS13b3JrZXIubWpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBAdHMtaWdub3JlXG50cnkge1xuICAgIHNlbGZbJ3dvcmtib3g6Y29yZTo3LjAuMCddICYmIF8oKTtcbn1cbmNhdGNoIChlKSB7IH1cblxuY29uc3QgZmFsbGJhY2sgPSAoY29kZSwgLi4uYXJncykgPT4ge1xuICBsZXQgbXNnID0gY29kZTtcbiAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xuICAgIG1zZyArPSBgIDo6ICR7SlNPTi5zdHJpbmdpZnkoYXJncyl9YDtcbiAgfVxuICByZXR1cm4gbXNnO1xufTtcbmNvbnN0IG1lc3NhZ2VHZW5lcmF0b3IgPSBmYWxsYmFjayA7XG5cbi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbi8qKlxuICogV29ya2JveCBlcnJvcnMgc2hvdWxkIGJlIHRocm93biB3aXRoIHRoaXMgY2xhc3MuXG4gKiBUaGlzIGFsbG93cyB1c2UgdG8gZW5zdXJlIHRoZSB0eXBlIGVhc2lseSBpbiB0ZXN0cyxcbiAqIGhlbHBzIGRldmVsb3BlcnMgaWRlbnRpZnkgZXJyb3JzIGZyb20gd29ya2JveFxuICogZWFzaWx5IGFuZCBhbGxvd3MgdXNlIHRvIG9wdGltaXNlIGVycm9yXG4gKiBtZXNzYWdlcyBjb3JyZWN0bHkuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgV29ya2JveEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yQ29kZSBUaGUgZXJyb3IgY29kZSB0aGF0XG4gICAgICogaWRlbnRpZmllcyB0aGlzIHBhcnRpY3VsYXIgZXJyb3IuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBkZXRhaWxzIEFueSByZWxldmFudCBhcmd1bWVudHNcbiAgICAgKiB0aGF0IHdpbGwgaGVscCBkZXZlbG9wZXJzIGlkZW50aWZ5IGlzc3VlcyBzaG91bGRcbiAgICAgKiBiZSBhZGRlZCBhcyBhIGtleSBvbiB0aGUgY29udGV4dCBvYmplY3QuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlLCBkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlR2VuZXJhdG9yKGVycm9yQ29kZSwgZGV0YWlscyk7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlcnJvckNvZGU7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgfVxufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5jb25zdCBfY2FjaGVOYW1lRGV0YWlscyA9IHtcbiAgICBnb29nbGVBbmFseXRpY3M6ICdnb29nbGVBbmFseXRpY3MnLFxuICAgIHByZWNhY2hlOiAncHJlY2FjaGUtdjInLFxuICAgIHByZWZpeDogJ3dvcmtib3gnLFxuICAgIHJ1bnRpbWU6ICdydW50aW1lJyxcbiAgICBzdWZmaXg6IHR5cGVvZiByZWdpc3RyYXRpb24gIT09ICd1bmRlZmluZWQnID8gcmVnaXN0cmF0aW9uLnNjb3BlIDogJycsXG59O1xuY29uc3QgX2NyZWF0ZUNhY2hlTmFtZSA9IChjYWNoZU5hbWUpID0+IHtcbiAgICByZXR1cm4gW19jYWNoZU5hbWVEZXRhaWxzLnByZWZpeCwgY2FjaGVOYW1lLCBfY2FjaGVOYW1lRGV0YWlscy5zdWZmaXhdXG4gICAgICAgIC5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiAwKVxuICAgICAgICAuam9pbignLScpO1xufTtcbmNvbnN0IGVhY2hDYWNoZU5hbWVEZXRhaWwgPSAoZm4pID0+IHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhfY2FjaGVOYW1lRGV0YWlscykpIHtcbiAgICAgICAgZm4oa2V5KTtcbiAgICB9XG59O1xuY29uc3QgY2FjaGVOYW1lcyA9IHtcbiAgICB1cGRhdGVEZXRhaWxzOiAoZGV0YWlscykgPT4ge1xuICAgICAgICBlYWNoQ2FjaGVOYW1lRGV0YWlsKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGV0YWlsc1trZXldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIF9jYWNoZU5hbWVEZXRhaWxzW2tleV0gPSBkZXRhaWxzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0R29vZ2xlQW5hbHl0aWNzTmFtZTogKHVzZXJDYWNoZU5hbWUpID0+IHtcbiAgICAgICAgcmV0dXJuIHVzZXJDYWNoZU5hbWUgfHwgX2NyZWF0ZUNhY2hlTmFtZShfY2FjaGVOYW1lRGV0YWlscy5nb29nbGVBbmFseXRpY3MpO1xuICAgIH0sXG4gICAgZ2V0UHJlY2FjaGVOYW1lOiAodXNlckNhY2hlTmFtZSkgPT4ge1xuICAgICAgICByZXR1cm4gdXNlckNhY2hlTmFtZSB8fCBfY3JlYXRlQ2FjaGVOYW1lKF9jYWNoZU5hbWVEZXRhaWxzLnByZWNhY2hlKTtcbiAgICB9LFxuICAgIGdldFByZWZpeDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gX2NhY2hlTmFtZURldGFpbHMucHJlZml4O1xuICAgIH0sXG4gICAgZ2V0UnVudGltZU5hbWU6ICh1c2VyQ2FjaGVOYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiB1c2VyQ2FjaGVOYW1lIHx8IF9jcmVhdGVDYWNoZU5hbWUoX2NhY2hlTmFtZURldGFpbHMucnVudGltZSk7XG4gICAgfSxcbiAgICBnZXRTdWZmaXg6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIF9jYWNoZU5hbWVEZXRhaWxzLnN1ZmZpeDtcbiAgICB9LFxufTtcblxuY29uc3QgbG9nZ2VyID0gbnVsbCA7XG5cbi8qXG4gIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIEEgdXRpbGl0eSBtZXRob2QgdGhhdCBtYWtlcyBpdCBlYXNpZXIgdG8gdXNlIGBldmVudC53YWl0VW50aWxgIHdpdGhcbiAqIGFzeW5jIGZ1bmN0aW9ucyBhbmQgcmV0dXJuIHRoZSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHtFeHRlbmRhYmxlRXZlbnR9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhc3luY0ZuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHdhaXRVbnRpbChldmVudCwgYXN5bmNGbikge1xuICAgIGNvbnN0IHJldHVyblByb21pc2UgPSBhc3luY0ZuKCk7XG4gICAgZXZlbnQud2FpdFVudGlsKHJldHVyblByb21pc2UpO1xuICAgIHJldHVybiByZXR1cm5Qcm9taXNlO1xufVxuXG4vLyBAdHMtaWdub3JlXG50cnkge1xuICAgIHNlbGZbJ3dvcmtib3g6cHJlY2FjaGluZzo3LjAuMCddICYmIF8oKTtcbn1cbmNhdGNoIChlKSB7IH1cblxuLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuLy8gTmFtZSBvZiB0aGUgc2VhcmNoIHBhcmFtZXRlciB1c2VkIHRvIHN0b3JlIHJldmlzaW9uIGluZm8uXG5jb25zdCBSRVZJU0lPTl9TRUFSQ0hfUEFSQU0gPSAnX19XQl9SRVZJU0lPTl9fJztcbi8qKlxuICogQ29udmVydHMgYSBtYW5pZmVzdCBlbnRyeSBpbnRvIGEgdmVyc2lvbmVkIFVSTCBzdWl0YWJsZSBmb3IgcHJlY2FjaGluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IGVudHJ5XG4gKiBAcmV0dXJuIHtzdHJpbmd9IEEgVVJMIHdpdGggdmVyc2lvbmluZyBpbmZvLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWVtYmVyb2Ygd29ya2JveC1wcmVjYWNoaW5nXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNhY2hlS2V5KGVudHJ5KSB7XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKCdhZGQtdG8tY2FjaGUtbGlzdC11bmV4cGVjdGVkLXR5cGUnLCB7IGVudHJ5IH0pO1xuICAgIH1cbiAgICAvLyBJZiBhIHByZWNhY2hlIG1hbmlmZXN0IGVudHJ5IGlzIGEgc3RyaW5nLCBpdCdzIGFzc3VtZWQgdG8gYmUgYSB2ZXJzaW9uZWRcbiAgICAvLyBVUkwsIGxpa2UgJy9hcHAuYWJjZDEyMzQuanMnLiBSZXR1cm4gYXMtaXMuXG4gICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgdXJsT2JqZWN0ID0gbmV3IFVSTChlbnRyeSwgbG9jYXRpb24uaHJlZik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYWNoZUtleTogdXJsT2JqZWN0LmhyZWYsXG4gICAgICAgICAgICB1cmw6IHVybE9iamVjdC5ocmVmLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB7IHJldmlzaW9uLCB1cmwgfSA9IGVudHJ5O1xuICAgIGlmICghdXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBXb3JrYm94RXJyb3IoJ2FkZC10by1jYWNoZS1saXN0LXVuZXhwZWN0ZWQtdHlwZScsIHsgZW50cnkgfSk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlJ3MganVzdCBhIFVSTCBhbmQgbm8gcmV2aXNpb24sIHRoZW4gaXQncyBhbHNvIGFzc3VtZWQgdG8gYmUgYVxuICAgIC8vIHZlcnNpb25lZCBVUkwuXG4gICAgaWYgKCFyZXZpc2lvbikge1xuICAgICAgICBjb25zdCB1cmxPYmplY3QgPSBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYWNoZUtleTogdXJsT2JqZWN0LmhyZWYsXG4gICAgICAgICAgICB1cmw6IHVybE9iamVjdC5ocmVmLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBPdGhlcndpc2UsIGNvbnN0cnVjdCBhIHByb3Blcmx5IHZlcnNpb25lZCBVUkwgdXNpbmcgdGhlIGN1c3RvbSBXb3JrYm94XG4gICAgLy8gc2VhcmNoIHBhcmFtZXRlciBhbG9uZyB3aXRoIHRoZSByZXZpc2lvbiBpbmZvLlxuICAgIGNvbnN0IGNhY2hlS2V5VVJMID0gbmV3IFVSTCh1cmwsIGxvY2F0aW9uLmhyZWYpO1xuICAgIGNvbnN0IG9yaWdpbmFsVVJMID0gbmV3IFVSTCh1cmwsIGxvY2F0aW9uLmhyZWYpO1xuICAgIGNhY2hlS2V5VVJMLnNlYXJjaFBhcmFtcy5zZXQoUkVWSVNJT05fU0VBUkNIX1BBUkFNLCByZXZpc2lvbik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FjaGVLZXk6IGNhY2hlS2V5VVJMLmhyZWYsXG4gICAgICAgIHVybDogb3JpZ2luYWxVUkwuaHJlZixcbiAgICB9O1xufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIEEgcGx1Z2luLCBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGggUHJlY2FjaGVDb250cm9sbGVyLCB0byBkZXRlcm1pbmUgdGhlXG4gKiBvZiBhc3NldHMgdGhhdCB3ZXJlIHVwZGF0ZWQgKG9yIG5vdCB1cGRhdGVkKSBkdXJpbmcgdGhlIGluc3RhbGwgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgUHJlY2FjaGVJbnN0YWxsUmVwb3J0UGx1Z2luIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy51cGRhdGVkVVJMcyA9IFtdO1xuICAgICAgICB0aGlzLm5vdFVwZGF0ZWRVUkxzID0gW107XG4gICAgICAgIHRoaXMuaGFuZGxlcldpbGxTdGFydCA9IGFzeW5jICh7IHJlcXVlc3QsIHN0YXRlLCB9KSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPOiBgc3RhdGVgIHNob3VsZCBuZXZlciBiZSB1bmRlZmluZWQuLi5cbiAgICAgICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLm9yaWdpbmFsUmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2FjaGVkUmVzcG9uc2VXaWxsQmVVc2VkID0gYXN5bmMgKHsgZXZlbnQsIHN0YXRlLCBjYWNoZWRSZXNwb25zZSwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdpbnN0YWxsJykge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vcmlnaW5hbFJlcXVlc3QgJiZcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUub3JpZ2luYWxSZXF1ZXN0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBgc3RhdGVgIHNob3VsZCBuZXZlciBiZSB1bmRlZmluZWQuLi5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gc3RhdGUub3JpZ2luYWxSZXF1ZXN0LnVybDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdFVwZGF0ZWRVUkxzLnB1c2godXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZFVSTHMucHVzaCh1cmwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFJlc3BvbnNlO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLypcbiAgQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuLyoqXG4gKiBBIHBsdWdpbiwgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoIFByZWNhY2hlQ29udHJvbGxlciwgdG8gdHJhbnNsYXRlIFVSTHMgaW50b1xuICogdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUga2V5LCBiYXNlZCBvbiB0aGUgY3VycmVudCByZXZpc2lvbiBpbmZvLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIFByZWNhY2hlQ2FjaGVLZXlQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKHsgcHJlY2FjaGVDb250cm9sbGVyIH0pIHtcbiAgICAgICAgdGhpcy5jYWNoZUtleVdpbGxCZVVzZWQgPSBhc3luYyAoeyByZXF1ZXN0LCBwYXJhbXMsIH0pID0+IHtcbiAgICAgICAgICAgIC8vIFBhcmFtcyBpcyB0eXBlIGFueSwgY2FuJ3QgY2hhbmdlIHJpZ2h0IG5vdy5cbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY2FjaGVLZXkpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJlY2FjaGVDb250cm9sbGVyLmdldENhY2hlS2V5Rm9yVVJMKHJlcXVlc3QudXJsKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICAgIHJldHVybiBjYWNoZUtleVxuICAgICAgICAgICAgICAgID8gbmV3IFJlcXVlc3QoY2FjaGVLZXksIHsgaGVhZGVyczogcmVxdWVzdC5oZWFkZXJzIH0pXG4gICAgICAgICAgICAgICAgOiByZXF1ZXN0O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9wcmVjYWNoZUNvbnRyb2xsZXIgPSBwcmVjYWNoZUNvbnRyb2xsZXI7XG4gICAgfVxufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5sZXQgc3VwcG9ydFN0YXR1cztcbi8qKlxuICogQSB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgc3VwcG9ydHNcbiAqIGNvbnN0cnVjdGluZyBhIG5ldyBgUmVzcG9uc2VgIGZyb20gYSBgcmVzcG9uc2UuYm9keWAgc3RyZWFtLlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCwgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjYW4gc3VjY2Vzc2Z1bGx5XG4gKiAgICAgY29uc3RydWN0IGEgYFJlc3BvbnNlYCBmcm9tIGEgYHJlc3BvbnNlLmJvZHlgIHN0cmVhbSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2FuQ29uc3RydWN0UmVzcG9uc2VGcm9tQm9keVN0cmVhbSgpIHtcbiAgICBpZiAoc3VwcG9ydFN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHRlc3RSZXNwb25zZSA9IG5ldyBSZXNwb25zZSgnJyk7XG4gICAgICAgIGlmICgnYm9keScgaW4gdGVzdFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ldyBSZXNwb25zZSh0ZXN0UmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICAgICAgc3VwcG9ydFN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0U3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VwcG9ydFN0YXR1cyA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydFN0YXR1cztcbn1cblxuLypcbiAgQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuLyoqXG4gKiBBbGxvd3MgZGV2ZWxvcGVycyB0byBjb3B5IGEgcmVzcG9uc2UgYW5kIG1vZGlmeSBpdHMgYGhlYWRlcnNgLCBgc3RhdHVzYCxcbiAqIG9yIGBzdGF0dXNUZXh0YCB2YWx1ZXMgKHRoZSB2YWx1ZXMgc2V0dGFibGUgdmlhIGFcbiAqIFtgUmVzcG9uc2VJbml0YF17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1Jlc3BvbnNlL1Jlc3BvbnNlI1N5bnRheH1cbiAqIG9iamVjdCBpbiB0aGUgY29uc3RydWN0b3IpLlxuICogVG8gbW9kaWZ5IHRoZXNlIHZhbHVlcywgcGFzcyBhIGZ1bmN0aW9uIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuIFRoYXRcbiAqIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgc2luZ2xlIG9iamVjdCB3aXRoIHRoZSByZXNwb25zZSBwcm9wZXJ0aWVzXG4gKiBge2hlYWRlcnMsIHN0YXR1cywgc3RhdHVzVGV4dH1gLiBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoaXMgZnVuY3Rpb24gd2lsbFxuICogYmUgdXNlZCBhcyB0aGUgYFJlc3BvbnNlSW5pdGAgZm9yIHRoZSBuZXcgYFJlc3BvbnNlYC4gVG8gY2hhbmdlIHRoZSB2YWx1ZXNcbiAqIGVpdGhlciBtb2RpZnkgdGhlIHBhc3NlZCBwYXJhbWV0ZXIocykgYW5kIHJldHVybiBpdCwgb3IgcmV0dXJuIGEgdG90YWxseVxuICogbmV3IG9iamVjdC5cbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBpbnRlbnRpb25hbGx5IGxpbWl0ZWQgdG8gc2FtZS1vcmlnaW4gcmVzcG9uc2VzLCByZWdhcmRsZXNzIG9mXG4gKiB3aGV0aGVyIENPUlMgd2FzIHVzZWQgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllclxuICogQG1lbWJlcm9mIHdvcmtib3gtY29yZVxuICovXG5hc3luYyBmdW5jdGlvbiBjb3B5UmVzcG9uc2UocmVzcG9uc2UsIG1vZGlmaWVyKSB7XG4gICAgbGV0IG9yaWdpbiA9IG51bGw7XG4gICAgLy8gSWYgcmVzcG9uc2UudXJsIGlzbid0IHNldCwgYXNzdW1lIGl0J3MgY3Jvc3Mtb3JpZ2luIGFuZCBrZWVwIG9yaWdpbiBudWxsLlxuICAgIGlmIChyZXNwb25zZS51cmwpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VVUkwgPSBuZXcgVVJMKHJlc3BvbnNlLnVybCk7XG4gICAgICAgIG9yaWdpbiA9IHJlc3BvbnNlVVJMLm9yaWdpbjtcbiAgICB9XG4gICAgaWYgKG9yaWdpbiAhPT0gc2VsZi5sb2NhdGlvbi5vcmlnaW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcignY3Jvc3Mtb3JpZ2luLWNvcHktcmVzcG9uc2UnLCB7IG9yaWdpbiB9KTtcbiAgICB9XG4gICAgY29uc3QgY2xvbmVkUmVzcG9uc2UgPSByZXNwb25zZS5jbG9uZSgpO1xuICAgIC8vIENyZWF0ZSBhIGZyZXNoIGBSZXNwb25zZUluaXRgIG9iamVjdCBieSBjbG9uaW5nIHRoZSBoZWFkZXJzLlxuICAgIGNvbnN0IHJlc3BvbnNlSW5pdCA9IHtcbiAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoY2xvbmVkUmVzcG9uc2UuaGVhZGVycyksXG4gICAgICAgIHN0YXR1czogY2xvbmVkUmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiBjbG9uZWRSZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgIH07XG4gICAgLy8gQXBwbHkgYW55IHVzZXIgbW9kaWZpY2F0aW9ucy5cbiAgICBjb25zdCBtb2RpZmllZFJlc3BvbnNlSW5pdCA9IHJlc3BvbnNlSW5pdDtcbiAgICAvLyBDcmVhdGUgdGhlIG5ldyByZXNwb25zZSBmcm9tIHRoZSBib2R5IHN0cmVhbSBhbmQgYFJlc3BvbnNlSW5pdGBcbiAgICAvLyBtb2RpZmljYXRpb25zLiBOb3RlOiBub3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdGhlIFJlc3BvbnNlLmJvZHkgc3RyZWFtLFxuICAgIC8vIHNvIGZhbGwgYmFjayB0byByZWFkaW5nIHRoZSBlbnRpcmUgYm9keSBpbnRvIG1lbW9yeSBhcyBhIGJsb2IuXG4gICAgY29uc3QgYm9keSA9IGNhbkNvbnN0cnVjdFJlc3BvbnNlRnJvbUJvZHlTdHJlYW0oKVxuICAgICAgICA/IGNsb25lZFJlc3BvbnNlLmJvZHlcbiAgICAgICAgOiBhd2FpdCBjbG9uZWRSZXNwb25zZS5ibG9iKCk7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShib2R5LCBtb2RpZmllZFJlc3BvbnNlSW5pdCk7XG59XG5cbi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbmNvbnN0IGdldEZyaWVuZGx5VVJMID0gKHVybCkgPT4ge1xuICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwoU3RyaW5nKHVybCksIGxvY2F0aW9uLmhyZWYpO1xuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dvcmtib3gvaXNzdWVzLzIzMjNcbiAgICAvLyBXZSB3YW50IHRvIGluY2x1ZGUgZXZlcnl0aGluZywgZXhjZXB0IGZvciB0aGUgb3JpZ2luIGlmIGl0J3Mgc2FtZS1vcmlnaW4uXG4gICAgcmV0dXJuIHVybE9iai5ocmVmLnJlcGxhY2UobmV3IFJlZ0V4cChgXiR7bG9jYXRpb24ub3JpZ2lufWApLCAnJyk7XG59O1xuXG4vKlxuICBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuZnVuY3Rpb24gc3RyaXBQYXJhbXMoZnVsbFVSTCwgaWdub3JlUGFyYW1zKSB7XG4gICAgY29uc3Qgc3RyaXBwZWRVUkwgPSBuZXcgVVJMKGZ1bGxVUkwpO1xuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgaWdub3JlUGFyYW1zKSB7XG4gICAgICAgIHN0cmlwcGVkVVJMLnNlYXJjaFBhcmFtcy5kZWxldGUocGFyYW0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaXBwZWRVUkwuaHJlZjtcbn1cbi8qKlxuICogTWF0Y2hlcyBhbiBpdGVtIGluIHRoZSBjYWNoZSwgaWdub3Jpbmcgc3BlY2lmaWMgVVJMIHBhcmFtcy4gVGhpcyBpcyBzaW1pbGFyXG4gKiB0byB0aGUgYGlnbm9yZVNlYXJjaGAgb3B0aW9uLCBidXQgaXQgYWxsb3dzIHlvdSB0byBpZ25vcmUganVzdCBzcGVjaWZpY1xuICogcGFyYW1zICh3aGlsZSBjb250aW51aW5nIHRvIG1hdGNoIG9uIHRoZSBvdGhlcnMpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0NhY2hlfSBjYWNoZVxuICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gbWF0Y2hPcHRpb25zXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGlnbm9yZVBhcmFtc1xuICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZXx1bmRlZmluZWQ+fVxuICovXG5hc3luYyBmdW5jdGlvbiBjYWNoZU1hdGNoSWdub3JlUGFyYW1zKGNhY2hlLCByZXF1ZXN0LCBpZ25vcmVQYXJhbXMsIG1hdGNoT3B0aW9ucykge1xuICAgIGNvbnN0IHN0cmlwcGVkUmVxdWVzdFVSTCA9IHN0cmlwUGFyYW1zKHJlcXVlc3QudXJsLCBpZ25vcmVQYXJhbXMpO1xuICAgIC8vIElmIHRoZSByZXF1ZXN0IGRvZXNuJ3QgaW5jbHVkZSBhbnkgaWdub3JlZCBwYXJhbXMsIG1hdGNoIGFzIG5vcm1hbC5cbiAgICBpZiAocmVxdWVzdC51cmwgPT09IHN0cmlwcGVkUmVxdWVzdFVSTCkge1xuICAgICAgICByZXR1cm4gY2FjaGUubWF0Y2gocmVxdWVzdCwgbWF0Y2hPcHRpb25zKTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlLCBtYXRjaCBieSBjb21wYXJpbmcga2V5c1xuICAgIGNvbnN0IGtleXNPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXRjaE9wdGlvbnMpLCB7IGlnbm9yZVNlYXJjaDogdHJ1ZSB9KTtcbiAgICBjb25zdCBjYWNoZUtleXMgPSBhd2FpdCBjYWNoZS5rZXlzKHJlcXVlc3QsIGtleXNPcHRpb25zKTtcbiAgICBmb3IgKGNvbnN0IGNhY2hlS2V5IG9mIGNhY2hlS2V5cykge1xuICAgICAgICBjb25zdCBzdHJpcHBlZENhY2hlS2V5VVJMID0gc3RyaXBQYXJhbXMoY2FjaGVLZXkudXJsLCBpZ25vcmVQYXJhbXMpO1xuICAgICAgICBpZiAoc3RyaXBwZWRSZXF1ZXN0VVJMID09PSBzdHJpcHBlZENhY2hlS2V5VVJMKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUubWF0Y2goY2FjaGVLZXksIG1hdGNoT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuO1xufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIFRoZSBEZWZlcnJlZCBjbGFzcyBjb21wb3NlcyBQcm9taXNlcyBpbiBhIHdheSB0aGF0IGFsbG93cyBmb3IgdGhlbSB0byBiZVxuICogcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgZnJvbSBvdXRzaWRlIHRoZSBjb25zdHJ1Y3Rvci4gSW4gbW9zdCBjYXNlcyBwcm9taXNlc1xuICogc2hvdWxkIGJlIHVzZWQgZGlyZWN0bHksIGJ1dCBEZWZlcnJlZHMgY2FuIGJlIG5lY2Vzc2FyeSB3aGVuIHRoZSBsb2dpYyB0b1xuICogcmVzb2x2ZSBhIHByb21pc2UgbXVzdCBiZSBzZXBhcmF0ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBEZWZlcnJlZCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHByb21pc2UgYW5kIGV4cG9zZXMgaXRzIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMgYXMgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbi8vIENhbGxiYWNrcyB0byBiZSBleGVjdXRlZCB3aGVuZXZlciB0aGVyZSdzIGEgcXVvdGEgZXJyb3IuXG4vLyBDYW4ndCBjaGFuZ2UgRnVuY3Rpb24gdHlwZSByaWdodCBub3cuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuY29uc3QgcXVvdGFFcnJvckNhbGxiYWNrcyA9IG5ldyBTZXQoKTtcblxuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1b3RhRXJyb3JDYWxsYmFja3MoKSB7XG4gIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgcXVvdGFFcnJvckNhbGxiYWNrcykge1xuICAgIGF3YWl0IGNhbGxiYWNrKCk7XG4gIH1cbn1cblxuLypcbiAgQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhbmQgdGhlIHBhc3NlZCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICogVGhpcyB1dGlsaXR5IGlzIGFuIGFzeW5jL2F3YWl0LWZyaWVuZGx5IHZlcnNpb24gb2YgYHNldFRpbWVvdXRgLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBtc1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRpbWVvdXQobXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cblxuLy8gQHRzLWlnbm9yZVxudHJ5IHtcbiAgICBzZWxmWyd3b3JrYm94OnN0cmF0ZWdpZXM6Ny4wLjAnXSAmJiBfKCk7XG59XG5jYXRjaCAoZSkgeyB9XG5cbmZ1bmN0aW9uIHRvUmVxdWVzdChpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gbmV3IFJlcXVlc3QoaW5wdXQpIDogaW5wdXQ7XG59XG5jbGFzcyBTdHJhdGVneUhhbmRsZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIHBhc3NlZCBzdHJhdGVneSBhbmQgZXZlbnRcbiAgICogdGhhdCdzIGhhbmRsaW5nIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBUaGUgY29uc3RydWN0b3IgYWxzbyBpbml0aWFsaXplcyB0aGUgc3RhdGUgdGhhdCB3aWxsIGJlIHBhc3NlZCB0byBlYWNoIG9mXG4gICAqIHRoZSBwbHVnaW5zIGhhbmRsaW5nIHRoaXMgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHt3b3JrYm94LXN0cmF0ZWdpZXMuU3RyYXRlZ3l9IHN0cmF0ZWd5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IG9wdGlvbnMucmVxdWVzdCBBIHJlcXVlc3QgdG8gcnVuIHRoaXMgc3RyYXRlZ3kgZm9yLlxuICAgKiBAcGFyYW0ge0V4dGVuZGFibGVFdmVudH0gb3B0aW9ucy5ldmVudCBUaGUgZXZlbnQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgKiAgICAgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtVUkx9IFtvcHRpb25zLnVybF1cbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5wYXJhbXNdIFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGVcbiAgICogICAgIHtAbGluayB3b3JrYm94LXJvdXRpbmd+bWF0Y2hDYWxsYmFja30gKGlmIGFwcGxpY2FibGUpLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3RyYXRlZ3ksIG9wdGlvbnMpIHtcbiAgICB0aGlzLl9jYWNoZUtleXMgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMpO1xuICAgIHRoaXMuZXZlbnQgPSBvcHRpb25zLmV2ZW50O1xuICAgIHRoaXMuX3N0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgdGhpcy5faGFuZGxlckRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgdGhpcy5fZXh0ZW5kTGlmZXRpbWVQcm9taXNlcyA9IFtdO1xuICAgIHRoaXMuX3BsdWdpbnMgPSBbLi4uc3RyYXRlZ3kucGx1Z2luc107XG4gICAgdGhpcy5fcGx1Z2luU3RhdGVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHRoaXMuX3BsdWdpbnMpIHtcbiAgICAgIHRoaXMuX3BsdWdpblN0YXRlTWFwLnNldChwbHVnaW4sIHt9KTtcbiAgICB9XG4gICAgdGhpcy5ldmVudC53YWl0VW50aWwodGhpcy5faGFuZGxlckRlZmVycmVkLnByb21pc2UpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaGVzIGEgZ2l2ZW4gcmVxdWVzdCAoYW5kIGludm9rZXMgYW55IGFwcGxpY2FibGUgcGx1Z2luIGNhbGxiYWNrXG4gICAqIG1ldGhvZHMpIHVzaW5nIHRoZSBgZmV0Y2hPcHRpb25zYCAoZm9yIG5vbi1uYXZpZ2F0aW9uIHJlcXVlc3RzKSBhbmRcbiAgICogYHBsdWdpbnNgIGRlZmluZWQgb24gdGhlIGBTdHJhdGVneWAgb2JqZWN0LlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHBsdWdpbiBsaWZlY3ljbGUgbWV0aG9kcyBhcmUgaW52b2tlZCB3aGVuIHVzaW5nIHRoaXMgbWV0aG9kOlxuICAgKiAtIGByZXF1ZXN0V2lsbEZldGNoKClgXG4gICAqIC0gYGZldGNoRGlkU3VjY2VlZCgpYFxuICAgKiAtIGBmZXRjaERpZEZhaWwoKWBcbiAgICpcbiAgICogQHBhcmFtIHtSZXF1ZXN0fHN0cmluZ30gaW5wdXQgVGhlIFVSTCBvciByZXF1ZXN0IHRvIGZldGNoLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICovXG4gIGFzeW5jIGZldGNoKGlucHV0KSB7XG4gICAgY29uc3QgeyBldmVudCB9ID0gdGhpcztcbiAgICBsZXQgcmVxdWVzdCA9IHRvUmVxdWVzdChpbnB1dCk7XG4gICAgaWYgKHJlcXVlc3QubW9kZSA9PT0gXCJuYXZpZ2F0ZVwiICYmIGV2ZW50IGluc3RhbmNlb2YgRmV0Y2hFdmVudCAmJiBldmVudC5wcmVsb2FkUmVzcG9uc2UpIHtcbiAgICAgIGNvbnN0IHBvc3NpYmxlUHJlbG9hZFJlc3BvbnNlID0gYXdhaXQgZXZlbnQucHJlbG9hZFJlc3BvbnNlO1xuICAgICAgaWYgKHBvc3NpYmxlUHJlbG9hZFJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiBwb3NzaWJsZVByZWxvYWRSZXNwb25zZTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luYWxSZXF1ZXN0ID0gdGhpcy5oYXNDYWxsYmFjayhcImZldGNoRGlkRmFpbFwiKSA/IHJlcXVlc3QuY2xvbmUoKSA6IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgY2Igb2YgdGhpcy5pdGVyYXRlQ2FsbGJhY2tzKFwicmVxdWVzdFdpbGxGZXRjaFwiKSkge1xuICAgICAgICByZXF1ZXN0ID0gYXdhaXQgY2IoeyByZXF1ZXN0OiByZXF1ZXN0LmNsb25lKCksIGV2ZW50IH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBXb3JrYm94RXJyb3IoXCJwbHVnaW4tZXJyb3ItcmVxdWVzdC13aWxsLWZldGNoXCIsIHtcbiAgICAgICAgICB0aHJvd25FcnJvck1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwbHVnaW5GaWx0ZXJlZFJlcXVlc3QgPSByZXF1ZXN0LmNsb25lKCk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBmZXRjaFJlc3BvbnNlO1xuICAgICAgZmV0Y2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QsIHJlcXVlc3QubW9kZSA9PT0gXCJuYXZpZ2F0ZVwiID8gdm9pZCAwIDogdGhpcy5fc3RyYXRlZ3kuZmV0Y2hPcHRpb25zKTtcbiAgICAgIGlmIChmYWxzZSkgO1xuICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiB0aGlzLml0ZXJhdGVDYWxsYmFja3MoXCJmZXRjaERpZFN1Y2NlZWRcIikpIHtcbiAgICAgICAgZmV0Y2hSZXNwb25zZSA9IGF3YWl0IGNhbGxiYWNrKHtcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICByZXF1ZXN0OiBwbHVnaW5GaWx0ZXJlZFJlcXVlc3QsXG4gICAgICAgICAgcmVzcG9uc2U6IGZldGNoUmVzcG9uc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmV0Y2hSZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKG9yaWdpbmFsUmVxdWVzdCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJ1bkNhbGxiYWNrcyhcImZldGNoRGlkRmFpbFwiLCB7XG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgb3JpZ2luYWxSZXF1ZXN0OiBvcmlnaW5hbFJlcXVlc3QuY2xvbmUoKSxcbiAgICAgICAgICByZXF1ZXN0OiBwbHVnaW5GaWx0ZXJlZFJlcXVlc3QuY2xvbmUoKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FsbHMgYHRoaXMuZmV0Y2goKWAgYW5kIChpbiB0aGUgYmFja2dyb3VuZCkgcnVucyBgdGhpcy5jYWNoZVB1dCgpYCBvblxuICAgKiB0aGUgcmVzcG9uc2UgZ2VuZXJhdGVkIGJ5IGB0aGlzLmZldGNoKClgLlxuICAgKlxuICAgKiBUaGUgY2FsbCB0byBgdGhpcy5jYWNoZVB1dCgpYCBhdXRvbWF0aWNhbGx5IGludm9rZXMgYHRoaXMud2FpdFVudGlsKClgLFxuICAgKiBzbyB5b3UgZG8gbm90IGhhdmUgdG8gbWFudWFsbHkgY2FsbCBgd2FpdFVudGlsKClgIG9uIHRoZSBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZXF1ZXN0fHN0cmluZ30gaW5wdXQgVGhlIHJlcXVlc3Qgb3IgVVJMIHRvIGZldGNoIGFuZCBjYWNoZS5cbiAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAqL1xuICBhc3luYyBmZXRjaEFuZENhY2hlUHV0KGlucHV0KSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoKGlucHV0KTtcbiAgICBjb25zdCByZXNwb25zZUNsb25lID0gcmVzcG9uc2UuY2xvbmUoKTtcbiAgICB2b2lkIHRoaXMud2FpdFVudGlsKHRoaXMuY2FjaGVQdXQoaW5wdXQsIHJlc3BvbnNlQ2xvbmUpKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbiAgLyoqXG4gICAqIE1hdGNoZXMgYSByZXF1ZXN0IGZyb20gdGhlIGNhY2hlIChhbmQgaW52b2tlcyBhbnkgYXBwbGljYWJsZSBwbHVnaW5cbiAgICogY2FsbGJhY2sgbWV0aG9kcykgdXNpbmcgdGhlIGBjYWNoZU5hbWVgLCBgbWF0Y2hPcHRpb25zYCwgYW5kIGBwbHVnaW5zYFxuICAgKiBkZWZpbmVkIG9uIHRoZSBzdHJhdGVneSBvYmplY3QuXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgcGx1Z2luIGxpZmVjeWNsZSBtZXRob2RzIGFyZSBpbnZva2VkIHdoZW4gdXNpbmcgdGhpcyBtZXRob2Q6XG4gICAqIC0gY2FjaGVLZXlXaWxsQnlVc2VkKClcbiAgICogLSBjYWNoZWRSZXNwb25zZVdpbGxCeVVzZWQoKVxuICAgKlxuICAgKiBAcGFyYW0ge1JlcXVlc3R8c3RyaW5nfSBrZXkgVGhlIFJlcXVlc3Qgb3IgVVJMIHRvIHVzZSBhcyB0aGUgY2FjaGUga2V5LlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlfHVuZGVmaW5lZD59IEEgbWF0Y2hpbmcgcmVzcG9uc2UsIGlmIGZvdW5kLlxuICAgKi9cbiAgYXN5bmMgY2FjaGVNYXRjaChrZXkpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdG9SZXF1ZXN0KGtleSk7XG4gICAgbGV0IGNhY2hlZFJlc3BvbnNlO1xuICAgIGNvbnN0IHsgY2FjaGVOYW1lLCBtYXRjaE9wdGlvbnMgfSA9IHRoaXMuX3N0cmF0ZWd5O1xuICAgIGNvbnN0IGVmZmVjdGl2ZVJlcXVlc3QgPSBhd2FpdCB0aGlzLmdldENhY2hlS2V5KHJlcXVlc3QsIFwicmVhZFwiKTtcbiAgICBjb25zdCBtdWx0aU1hdGNoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWF0Y2hPcHRpb25zKSwgeyBjYWNoZU5hbWUgfSk7XG4gICAgY2FjaGVkUmVzcG9uc2UgPSBhd2FpdCBjYWNoZXMubWF0Y2goZWZmZWN0aXZlUmVxdWVzdCwgbXVsdGlNYXRjaE9wdGlvbnMpO1xuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgdGhpcy5pdGVyYXRlQ2FsbGJhY2tzKFwiY2FjaGVkUmVzcG9uc2VXaWxsQmVVc2VkXCIpKSB7XG4gICAgICBjYWNoZWRSZXNwb25zZSA9IGF3YWl0IGNhbGxiYWNrKHtcbiAgICAgICAgY2FjaGVOYW1lLFxuICAgICAgICBtYXRjaE9wdGlvbnMsXG4gICAgICAgIGNhY2hlZFJlc3BvbnNlLFxuICAgICAgICByZXF1ZXN0OiBlZmZlY3RpdmVSZXF1ZXN0LFxuICAgICAgICBldmVudDogdGhpcy5ldmVudFxuICAgICAgfSkgfHwgdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVkUmVzcG9uc2U7XG4gIH1cbiAgLyoqXG4gICAqIFB1dHMgYSByZXF1ZXN0L3Jlc3BvbnNlIHBhaXIgaW4gdGhlIGNhY2hlIChhbmQgaW52b2tlcyBhbnkgYXBwbGljYWJsZVxuICAgKiBwbHVnaW4gY2FsbGJhY2sgbWV0aG9kcykgdXNpbmcgdGhlIGBjYWNoZU5hbWVgIGFuZCBgcGx1Z2luc2AgZGVmaW5lZCBvblxuICAgKiB0aGUgc3RyYXRlZ3kgb2JqZWN0LlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHBsdWdpbiBsaWZlY3ljbGUgbWV0aG9kcyBhcmUgaW52b2tlZCB3aGVuIHVzaW5nIHRoaXMgbWV0aG9kOlxuICAgKiAtIGNhY2hlS2V5V2lsbEJ5VXNlZCgpXG4gICAqIC0gY2FjaGVXaWxsVXBkYXRlKClcbiAgICogLSBjYWNoZURpZFVwZGF0ZSgpXG4gICAqXG4gICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IGtleSBUaGUgcmVxdWVzdCBvciBVUkwgdG8gdXNlIGFzIHRoZSBjYWNoZSBrZXkuXG4gICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlIFRoZSByZXNwb25zZSB0byBjYWNoZS5cbiAgICogQHJldHVybiB7UHJvbWlzZTxib29sZWFuPn0gYGZhbHNlYCBpZiBhIGNhY2hlV2lsbFVwZGF0ZSBjYXVzZWQgdGhlIHJlc3BvbnNlXG4gICAqIG5vdCBiZSBjYWNoZWQsIGFuZCBgdHJ1ZWAgb3RoZXJ3aXNlLlxuICAgKi9cbiAgYXN5bmMgY2FjaGVQdXQoa2V5LCByZXNwb25zZSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0b1JlcXVlc3Qoa2V5KTtcbiAgICBhd2FpdCB0aW1lb3V0KDApO1xuICAgIGNvbnN0IGVmZmVjdGl2ZVJlcXVlc3QgPSBhd2FpdCB0aGlzLmdldENhY2hlS2V5KHJlcXVlc3QsIFwid3JpdGVcIik7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihcImNhY2hlLXB1dC13aXRoLW5vLXJlc3BvbnNlXCIsIHtcbiAgICAgICAgdXJsOiBnZXRGcmllbmRseVVSTChlZmZlY3RpdmVSZXF1ZXN0LnVybClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZVRvQ2FjaGUgPSBhd2FpdCB0aGlzLl9lbnN1cmVSZXNwb25zZVNhZmVUb0NhY2hlKHJlc3BvbnNlKTtcbiAgICBpZiAoIXJlc3BvbnNlVG9DYWNoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB7IGNhY2hlTmFtZSwgbWF0Y2hPcHRpb25zIH0gPSB0aGlzLl9zdHJhdGVneTtcbiAgICBjb25zdCBjYWNoZSA9IGF3YWl0IHNlbGYuY2FjaGVzLm9wZW4oY2FjaGVOYW1lKTtcbiAgICBjb25zdCBoYXNDYWNoZVVwZGF0ZUNhbGxiYWNrID0gdGhpcy5oYXNDYWxsYmFjayhcImNhY2hlRGlkVXBkYXRlXCIpO1xuICAgIGNvbnN0IG9sZFJlc3BvbnNlID0gaGFzQ2FjaGVVcGRhdGVDYWxsYmFjayA/IGF3YWl0IGNhY2hlTWF0Y2hJZ25vcmVQYXJhbXMoXG4gICAgICAvLyBUT0RPKHBoaWxpcHdhbHRvbik6IHRoZSBgX19XQl9SRVZJU0lPTl9fYCBwYXJhbSBpcyBhIHByZWNhY2hpbmdcbiAgICAgIC8vIGZlYXR1cmUuIENvbnNpZGVyIGludG8gd2F5cyB0byBvbmx5IGFkZCB0aGlzIGJlaGF2aW9yIGlmIHVzaW5nXG4gICAgICAvLyBwcmVjYWNoaW5nLlxuICAgICAgY2FjaGUsXG4gICAgICBlZmZlY3RpdmVSZXF1ZXN0LmNsb25lKCksXG4gICAgICBbXCJfX1dCX1JFVklTSU9OX19cIl0sXG4gICAgICBtYXRjaE9wdGlvbnNcbiAgICApIDogbnVsbDtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2FjaGUucHV0KGVmZmVjdGl2ZVJlcXVlc3QsIGhhc0NhY2hlVXBkYXRlQ2FsbGJhY2sgPyByZXNwb25zZVRvQ2FjaGUuY2xvbmUoKSA6IHJlc3BvbnNlVG9DYWNoZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiKSB7XG4gICAgICAgICAgYXdhaXQgZXhlY3V0ZVF1b3RhRXJyb3JDYWxsYmFja3MoKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiB0aGlzLml0ZXJhdGVDYWxsYmFja3MoXCJjYWNoZURpZFVwZGF0ZVwiKSkge1xuICAgICAgYXdhaXQgY2FsbGJhY2soe1xuICAgICAgICBjYWNoZU5hbWUsXG4gICAgICAgIG9sZFJlc3BvbnNlLFxuICAgICAgICBuZXdSZXNwb25zZTogcmVzcG9uc2VUb0NhY2hlLmNsb25lKCksXG4gICAgICAgIHJlcXVlc3Q6IGVmZmVjdGl2ZVJlcXVlc3QsXG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB0aGUgbGlzdCBvZiBwbHVnaW5zIGZvciB0aGUgYGNhY2hlS2V5V2lsbEJlVXNlZGAgY2FsbGJhY2ssIGFuZFxuICAgKiBleGVjdXRlcyBhbnkgb2YgdGhvc2UgY2FsbGJhY2tzIGZvdW5kIGluIHNlcXVlbmNlLiBUaGUgZmluYWwgYFJlcXVlc3RgXG4gICAqIG9iamVjdCByZXR1cm5lZCBieSB0aGUgbGFzdCBwbHVnaW4gaXMgdHJlYXRlZCBhcyB0aGUgY2FjaGUga2V5IGZvciBjYWNoZVxuICAgKiByZWFkcyBhbmQvb3Igd3JpdGVzLiBJZiBubyBgY2FjaGVLZXlXaWxsQmVVc2VkYCBwbHVnaW4gY2FsbGJhY2tzIGhhdmVcbiAgICogYmVlbiByZWdpc3RlcmVkLCB0aGUgcGFzc2VkIHJlcXVlc3QgaXMgcmV0dXJuZWQgdW5tb2RpZmllZFxuICAgKlxuICAgKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVcbiAgICogQHJldHVybiB7UHJvbWlzZTxSZXF1ZXN0Pn1cbiAgICovXG4gIGFzeW5jIGdldENhY2hlS2V5KHJlcXVlc3QsIG1vZGUpIHtcbiAgICBjb25zdCBrZXkgPSBgJHtyZXF1ZXN0LnVybH0gfCAke21vZGV9YDtcbiAgICBpZiAoIXRoaXMuX2NhY2hlS2V5c1trZXldKSB7XG4gICAgICBsZXQgZWZmZWN0aXZlUmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMuaXRlcmF0ZUNhbGxiYWNrcyhcImNhY2hlS2V5V2lsbEJlVXNlZFwiKSkge1xuICAgICAgICBlZmZlY3RpdmVSZXF1ZXN0ID0gdG9SZXF1ZXN0KGF3YWl0IGNhbGxiYWNrKHtcbiAgICAgICAgICBtb2RlLFxuICAgICAgICAgIHJlcXVlc3Q6IGVmZmVjdGl2ZVJlcXVlc3QsXG4gICAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgICAgLy8gcGFyYW1zIGhhcyBhIHR5cGUgYW55IGNhbid0IGNoYW5nZSByaWdodCBub3cuXG4gICAgICAgICAgcGFyYW1zOiB0aGlzLnBhcmFtc1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2FjaGVLZXlzW2tleV0gPSBlZmZlY3RpdmVSZXF1ZXN0O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2FjaGVLZXlzW2tleV07XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyYXRlZ3kgaGFzIGF0IGxlYXN0IG9uZSBwbHVnaW4gd2l0aCB0aGUgZ2l2ZW5cbiAgICogY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjYWxsYmFjayB0byBjaGVjayBmb3IuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNDYWxsYmFjayhuYW1lKSB7XG4gICAgZm9yIChjb25zdCBwbHVnaW4gb2YgdGhpcy5fc3RyYXRlZ3kucGx1Z2lucykge1xuICAgICAgaWYgKG5hbWUgaW4gcGx1Z2luKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJ1bnMgYWxsIHBsdWdpbiBjYWxsYmFja3MgbWF0Y2hpbmcgdGhlIGdpdmVuIG5hbWUsIGluIG9yZGVyLCBwYXNzaW5nIHRoZVxuICAgKiBnaXZlbiBwYXJhbSBvYmplY3QgKG1lcmdlZCBpdGggdGhlIGN1cnJlbnQgcGx1Z2luIHN0YXRlKSBhcyB0aGUgb25seVxuICAgKiBhcmd1bWVudC5cbiAgICpcbiAgICogTm90ZTogc2luY2UgdGhpcyBtZXRob2QgcnVucyBhbGwgcGx1Z2lucywgaXQncyBub3Qgc3VpdGFibGUgZm9yIGNhc2VzXG4gICAqIHdoZXJlIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBjYWxsYmFjayBuZWVkcyB0byBiZSBhcHBsaWVkIHByaW9yIHRvIGNhbGxpbmdcbiAgICogdGhlIG5leHQgY2FsbGJhY2suIFNlZVxuICAgKiB7QGxpbmsgd29ya2JveC1zdHJhdGVnaWVzLlN0cmF0ZWd5SGFuZGxlciNpdGVyYXRlQ2FsbGJhY2tzfVxuICAgKiBiZWxvdyBmb3IgaG93IHRvIGhhbmRsZSB0aGF0IGNhc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjYWxsYmFjayB0byBydW4gd2l0aGluIGVhY2ggcGx1Z2luLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW0gVGhlIG9iamVjdCB0byBwYXNzIGFzIHRoZSBmaXJzdCAoYW5kIG9ubHkpIHBhcmFtXG4gICAqICAgICB3aGVuIGV4ZWN1dGluZyBlYWNoIGNhbGxiYWNrLiBUaGlzIG9iamVjdCB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZVxuICAgKiAgICAgY3VycmVudCBwbHVnaW4gc3RhdGUgcHJpb3IgdG8gY2FsbGJhY2sgZXhlY3V0aW9uLlxuICAgKi9cbiAgYXN5bmMgcnVuQ2FsbGJhY2tzKG5hbWUsIHBhcmFtKSB7XG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiB0aGlzLml0ZXJhdGVDYWxsYmFja3MobmFtZSkpIHtcbiAgICAgIGF3YWl0IGNhbGxiYWNrKHBhcmFtKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFjY2VwdHMgYSBjYWxsYmFjayBhbmQgcmV0dXJucyBhbiBpdGVyYWJsZSBvZiBtYXRjaGluZyBwbHVnaW4gY2FsbGJhY2tzLFxuICAgKiB3aGVyZSBlYWNoIGNhbGxiYWNrIGlzIHdyYXBwZWQgd2l0aCB0aGUgY3VycmVudCBoYW5kbGVyIHN0YXRlIChpLmUuIHdoZW5cbiAgICogeW91IGNhbGwgZWFjaCBjYWxsYmFjaywgd2hhdGV2ZXIgb2JqZWN0IHBhcmFtZXRlciB5b3UgcGFzcyBpdCB3aWxsXG4gICAqIGJlIG1lcmdlZCB3aXRoIHRoZSBwbHVnaW4ncyBjdXJyZW50IHN0YXRlKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgZm8gdGhlIGNhbGxiYWNrIHRvIHJ1blxuICAgKiBAcmV0dXJuIHtBcnJheTxGdW5jdGlvbj59XG4gICAqL1xuICAqaXRlcmF0ZUNhbGxiYWNrcyhuYW1lKSB7XG4gICAgZm9yIChjb25zdCBwbHVnaW4gb2YgdGhpcy5fc3RyYXRlZ3kucGx1Z2lucykge1xuICAgICAgaWYgKHR5cGVvZiBwbHVnaW5bbmFtZV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3BsdWdpblN0YXRlTWFwLmdldChwbHVnaW4pO1xuICAgICAgICBjb25zdCBzdGF0ZWZ1bENhbGxiYWNrID0gKHBhcmFtKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGVmdWxQYXJhbSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW0pLCB7IHN0YXRlIH0pO1xuICAgICAgICAgIHJldHVybiBwbHVnaW5bbmFtZV0oc3RhdGVmdWxQYXJhbSk7XG4gICAgICAgIH07XG4gICAgICAgIHlpZWxkIHN0YXRlZnVsQ2FsbGJhY2s7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgcHJvbWlzZSB0byB0aGVcbiAgICogW2V4dGVuZCBsaWZldGltZSBwcm9taXNlc117QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvI2V4dGVuZGFibGVldmVudC1leHRlbmQtbGlmZXRpbWUtcHJvbWlzZXN9XG4gICAqIG9mIHRoZSBldmVudCBldmVudCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcXVlc3QgYmVpbmcgaGFuZGxlZCAodXN1YWxseSBhXG4gICAqIGBGZXRjaEV2ZW50YCkuXG4gICAqXG4gICAqIE5vdGU6IHlvdSBjYW4gYXdhaXRcbiAgICoge0BsaW5rIHdvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJ+ZG9uZVdhaXRpbmd9XG4gICAqIHRvIGtub3cgd2hlbiBhbGwgYWRkZWQgcHJvbWlzZXMgaGF2ZSBzZXR0bGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1Byb21pc2V9IHByb21pc2UgQSBwcm9taXNlIHRvIGFkZCB0byB0aGUgZXh0ZW5kIGxpZmV0aW1lIHByb21pc2VzXG4gICAqICAgICBvZiB0aGUgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIHJlcXVlc3QuXG4gICAqL1xuICB3YWl0VW50aWwocHJvbWlzZSkge1xuICAgIHRoaXMuX2V4dGVuZExpZmV0aW1lUHJvbWlzZXMucHVzaChwcm9taXNlKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBwcm9taXNlcyBwYXNzZWQgdG9cbiAgICoge0BsaW5rIHdvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJ+d2FpdFVudGlsfVxuICAgKiBoYXZlIHNldHRsZWQuXG4gICAqXG4gICAqIE5vdGU6IGFueSB3b3JrIGRvbmUgYWZ0ZXIgYGRvbmVXYWl0aW5nKClgIHNldHRsZXMgc2hvdWxkIGJlIG1hbnVhbGx5XG4gICAqIHBhc3NlZCB0byBhbiBldmVudCdzIGB3YWl0VW50aWwoKWAgbWV0aG9kIChub3QgdGhpcyBoYW5kbGVyJ3NcbiAgICogYHdhaXRVbnRpbCgpYCBtZXRob2QpLCBvdGhlcndpc2UgdGhlIHNlcnZpY2Ugd29ya2VyIHRocmVhZCBteSBiZSBraWxsZWRcbiAgICogcHJpb3IgdG8geW91ciB3b3JrIGNvbXBsZXRpbmcuXG4gICAqL1xuICBhc3luYyBkb25lV2FpdGluZygpIHtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICB3aGlsZSAocHJvbWlzZSA9IHRoaXMuX2V4dGVuZExpZmV0aW1lUHJvbWlzZXMuc2hpZnQoKSkge1xuICAgICAgYXdhaXQgcHJvbWlzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFN0b3BzIHJ1bm5pbmcgdGhlIHN0cmF0ZWd5IGFuZCBpbW1lZGlhdGVseSByZXNvbHZlcyBhbnkgcGVuZGluZ1xuICAgKiBgd2FpdFVudGlsKClgIHByb21pc2VzLlxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLl9oYW5kbGVyRGVmZXJyZWQucmVzb2x2ZShudWxsKTtcbiAgfVxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBjYWxsIGNhY2hlV2lsbFVwZGF0ZSBvbiB0aGUgYXZhaWxhYmxlIHBsdWdpbnMgKG9yIHVzZVxuICAgKiBzdGF0dXMgPT09IDIwMCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBSZXNwb25zZSBpcyBzYWZlIGFuZCB2YWxpZCB0byBjYWNoZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZXF1ZXN0fSBvcHRpb25zLnJlcXVlc3RcbiAgICogQHBhcmFtIHtSZXNwb25zZX0gb3B0aW9ucy5yZXNwb25zZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlfHVuZGVmaW5lZD59XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfZW5zdXJlUmVzcG9uc2VTYWZlVG9DYWNoZShyZXNwb25zZSkge1xuICAgIGxldCByZXNwb25zZVRvQ2FjaGUgPSByZXNwb25zZTtcbiAgICBsZXQgcGx1Z2luc1VzZWQgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMuaXRlcmF0ZUNhbGxiYWNrcyhcImNhY2hlV2lsbFVwZGF0ZVwiKSkge1xuICAgICAgcmVzcG9uc2VUb0NhY2hlID0gYXdhaXQgY2FsbGJhY2soe1xuICAgICAgICByZXF1ZXN0OiB0aGlzLnJlcXVlc3QsXG4gICAgICAgIHJlc3BvbnNlOiByZXNwb25zZVRvQ2FjaGUsXG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50XG4gICAgICB9KSB8fCB2b2lkIDA7XG4gICAgICBwbHVnaW5zVXNlZCA9IHRydWU7XG4gICAgICBpZiAoIXJlc3BvbnNlVG9DYWNoZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFwbHVnaW5zVXNlZCkge1xuICAgICAgaWYgKHJlc3BvbnNlVG9DYWNoZSAmJiByZXNwb25zZVRvQ2FjaGUuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgcmVzcG9uc2VUb0NhY2hlID0gdm9pZCAwO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2VUb0NhY2hlO1xuICB9XG59XG5cbmNsYXNzIFN0cmF0ZWd5IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIHN0cmF0ZWd5IGFuZCBzZXRzIGFsbCBkb2N1bWVudGVkIG9wdGlvblxuICAgKiBwcm9wZXJ0aWVzIGFzIHB1YmxpYyBpbnN0YW5jZSBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBOb3RlOiBpZiBhIGN1c3RvbSBzdHJhdGVneSBjbGFzcyBleHRlbmRzIHRoZSBiYXNlIFN0cmF0ZWd5IGNsYXNzIGFuZCBkb2VzXG4gICAqIG5vdCBuZWVkIG1vcmUgdGhhbiB0aGVzZSBwcm9wZXJ0aWVzLCBpdCBkb2VzIG5vdCBuZWVkIHRvIGRlZmluZSBpdHMgb3duXG4gICAqIGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jYWNoZU5hbWVdIENhY2hlIG5hbWUgdG8gc3RvcmUgYW5kIHJldHJpZXZlXG4gICAqIHJlcXVlc3RzLiBEZWZhdWx0cyB0byB0aGUgY2FjaGUgbmFtZXMgcHJvdmlkZWQgYnlcbiAgICoge0BsaW5rIHdvcmtib3gtY29yZS5jYWNoZU5hbWVzfS5cbiAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBbb3B0aW9ucy5wbHVnaW5zXSBbUGx1Z2luc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL3dvcmtib3gvZ3VpZGVzL3VzaW5nLXBsdWdpbnN9XG4gICAqIHRvIHVzZSBpbiBjb25qdW5jdGlvbiB3aXRoIHRoaXMgY2FjaGluZyBzdHJhdGVneS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmZldGNoT3B0aW9uc10gVmFsdWVzIHBhc3NlZCBhbG9uZyB0byB0aGVcbiAgICogW2Bpbml0YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd09yV29ya2VyR2xvYmFsU2NvcGUvZmV0Y2gjUGFyYW1ldGVycylcbiAgICogb2YgW25vbi1uYXZpZ2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dvcmtib3gvaXNzdWVzLzE3OTYpXG4gICAqIGBmZXRjaCgpYCByZXF1ZXN0cyBtYWRlIGJ5IHRoaXMgc3RyYXRlZ3kuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5tYXRjaE9wdGlvbnNdIFRoZVxuICAgKiBbYENhY2hlUXVlcnlPcHRpb25zYF17QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvI2RpY3RkZWYtY2FjaGVxdWVyeW9wdGlvbnN9XG4gICAqIGZvciBhbnkgYGNhY2hlLm1hdGNoKClgIG9yIGBjYWNoZS5wdXQoKWAgY2FsbHMgbWFkZSBieSB0aGlzIHN0cmF0ZWd5LlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5jYWNoZU5hbWUgPSBjYWNoZU5hbWVzLmdldFJ1bnRpbWVOYW1lKG9wdGlvbnMuY2FjaGVOYW1lKTtcbiAgICB0aGlzLnBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMgPSBvcHRpb25zLmZldGNoT3B0aW9ucztcbiAgICB0aGlzLm1hdGNoT3B0aW9ucyA9IG9wdGlvbnMubWF0Y2hPcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgcmVxdWVzdCBzdHJhdGVneSBhbmQgcmV0dXJucyBhIGBQcm9taXNlYCB0aGF0IHdpbGwgcmVzb2x2ZSB3aXRoXG4gICAqIGEgYFJlc3BvbnNlYCwgaW52b2tpbmcgYWxsIHJlbGV2YW50IHBsdWdpbiBjYWxsYmFja3MuXG4gICAqXG4gICAqIFdoZW4gYSBzdHJhdGVneSBpbnN0YW5jZSBpcyByZWdpc3RlcmVkIHdpdGggYSBXb3JrYm94XG4gICAqIHtAbGluayB3b3JrYm94LXJvdXRpbmcuUm91dGV9LCB0aGlzIG1ldGhvZCBpcyBhdXRvbWF0aWNhbGx5XG4gICAqIGNhbGxlZCB3aGVuIHRoZSByb3V0ZSBtYXRjaGVzLlxuICAgKlxuICAgKiBBbHRlcm5hdGl2ZWx5LCB0aGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBpbiBhIHN0YW5kYWxvbmUgYEZldGNoRXZlbnRgXG4gICAqIGxpc3RlbmVyIGJ5IHBhc3NpbmcgaXQgdG8gYGV2ZW50LnJlc3BvbmRXaXRoKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZldGNoRXZlbnR8T2JqZWN0fSBvcHRpb25zIEEgYEZldGNoRXZlbnRgIG9yIGFuIG9iamVjdCB3aXRoIHRoZVxuICAgKiAgICAgcHJvcGVydGllcyBsaXN0ZWQgYmVsb3cuXG4gICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IG9wdGlvbnMucmVxdWVzdCBBIHJlcXVlc3QgdG8gcnVuIHRoaXMgc3RyYXRlZ3kgZm9yLlxuICAgKiBAcGFyYW0ge0V4dGVuZGFibGVFdmVudH0gb3B0aW9ucy5ldmVudCBUaGUgZXZlbnQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgKiAgICAgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtVUkx9IFtvcHRpb25zLnVybF1cbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5wYXJhbXNdXG4gICAqL1xuICBoYW5kbGUob3B0aW9ucykge1xuICAgIGNvbnN0IFtyZXNwb25zZURvbmVdID0gdGhpcy5oYW5kbGVBbGwob3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlRG9uZTtcbiAgfVxuICAvKipcbiAgICogU2ltaWxhciB0byB7QGxpbmsgd29ya2JveC1zdHJhdGVnaWVzLlN0cmF0ZWd5fmhhbmRsZX0sIGJ1dFxuICAgKiBpbnN0ZWFkIG9mIGp1c3QgcmV0dXJuaW5nIGEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgdG8gYSBgUmVzcG9uc2VgIGl0XG4gICAqIGl0IHdpbGwgcmV0dXJuIGFuIHR1cGxlIG9mIGBbcmVzcG9uc2UsIGRvbmVdYCBwcm9taXNlcywgd2hlcmUgdGhlIGZvcm1lclxuICAgKiAoYHJlc3BvbnNlYCkgaXMgZXF1aXZhbGVudCB0byB3aGF0IGBoYW5kbGUoKWAgcmV0dXJucywgYW5kIHRoZSBsYXR0ZXIgaXMgYVxuICAgKiBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIG9uY2UgYW55IHByb21pc2VzIHRoYXQgd2VyZSBhZGRlZCB0b1xuICAgKiBgZXZlbnQud2FpdFVudGlsKClgIGFzIHBhcnQgb2YgcGVyZm9ybWluZyB0aGUgc3RyYXRlZ3kgaGF2ZSBjb21wbGV0ZWQuXG4gICAqXG4gICAqIFlvdSBjYW4gYXdhaXQgdGhlIGBkb25lYCBwcm9taXNlIHRvIGVuc3VyZSBhbnkgZXh0cmEgd29yayBwZXJmb3JtZWQgYnlcbiAgICogdGhlIHN0cmF0ZWd5ICh1c3VhbGx5IGNhY2hpbmcgcmVzcG9uc2VzKSBjb21wbGV0ZXMgc3VjY2Vzc2Z1bGx5LlxuICAgKlxuICAgKiBAcGFyYW0ge0ZldGNoRXZlbnR8T2JqZWN0fSBvcHRpb25zIEEgYEZldGNoRXZlbnRgIG9yIGFuIG9iamVjdCB3aXRoIHRoZVxuICAgKiAgICAgcHJvcGVydGllcyBsaXN0ZWQgYmVsb3cuXG4gICAqIEBwYXJhbSB7UmVxdWVzdHxzdHJpbmd9IG9wdGlvbnMucmVxdWVzdCBBIHJlcXVlc3QgdG8gcnVuIHRoaXMgc3RyYXRlZ3kgZm9yLlxuICAgKiBAcGFyYW0ge0V4dGVuZGFibGVFdmVudH0gb3B0aW9ucy5ldmVudCBUaGUgZXZlbnQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgKiAgICAgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtVUkx9IFtvcHRpb25zLnVybF1cbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5wYXJhbXNdXG4gICAqIEByZXR1cm4ge0FycmF5PFByb21pc2U+fSBBIHR1cGxlIG9mIFtyZXNwb25zZSwgZG9uZV1cbiAgICogICAgIHByb21pc2VzIHRoYXQgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIHJlc3BvbnNlIHJlc29sdmVzIGFzXG4gICAqICAgICB3ZWxsIGFzIHdoZW4gdGhlIGhhbmRsZXIgaGFzIGNvbXBsZXRlZCBhbGwgaXRzIHdvcmsuXG4gICAqL1xuICBoYW5kbGVBbGwob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zIGluc3RhbmNlb2YgRmV0Y2hFdmVudCkge1xuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgZXZlbnQ6IG9wdGlvbnMsXG4gICAgICAgIHJlcXVlc3Q6IG9wdGlvbnMucmVxdWVzdFxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnQgPSBvcHRpb25zLmV2ZW50O1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0eXBlb2Ygb3B0aW9ucy5yZXF1ZXN0ID09PSBcInN0cmluZ1wiID8gbmV3IFJlcXVlc3Qob3B0aW9ucy5yZXF1ZXN0KSA6IG9wdGlvbnMucmVxdWVzdDtcbiAgICBjb25zdCBwYXJhbXMgPSBcInBhcmFtc1wiIGluIG9wdGlvbnMgPyBvcHRpb25zLnBhcmFtcyA6IHZvaWQgMDtcbiAgICBjb25zdCBoYW5kbGVyID0gbmV3IFN0cmF0ZWd5SGFuZGxlcih0aGlzLCB7IGV2ZW50LCByZXF1ZXN0LCBwYXJhbXMgfSk7XG4gICAgY29uc3QgcmVzcG9uc2VEb25lID0gdGhpcy5fZ2V0UmVzcG9uc2UoaGFuZGxlciwgcmVxdWVzdCwgZXZlbnQpO1xuICAgIGNvbnN0IGhhbmRsZXJEb25lID0gdGhpcy5fYXdhaXRDb21wbGV0ZShyZXNwb25zZURvbmUsIGhhbmRsZXIsIHJlcXVlc3QsIGV2ZW50KTtcbiAgICByZXR1cm4gW3Jlc3BvbnNlRG9uZSwgaGFuZGxlckRvbmVdO1xuICB9XG4gIGFzeW5jIF9nZXRSZXNwb25zZShoYW5kbGVyLCByZXF1ZXN0LCBldmVudCkge1xuICAgIGF3YWl0IGhhbmRsZXIucnVuQ2FsbGJhY2tzKFwiaGFuZGxlcldpbGxTdGFydFwiLCB7IGV2ZW50LCByZXF1ZXN0IH0pO1xuICAgIGxldCByZXNwb25zZSA9IHZvaWQgMDtcbiAgICB0cnkge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9oYW5kbGUocmVxdWVzdCwgaGFuZGxlcik7XG4gICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKFwibm8tcmVzcG9uc2VcIiwgeyB1cmw6IHJlcXVlc3QudXJsIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGhhbmRsZXIuaXRlcmF0ZUNhbGxiYWNrcyhcImhhbmRsZXJEaWRFcnJvclwiKSkge1xuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgY2FsbGJhY2soeyBlcnJvciwgZXZlbnQsIHJlcXVlc3QgfSk7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgaGFuZGxlci5pdGVyYXRlQ2FsbGJhY2tzKFwiaGFuZGxlcldpbGxSZXNwb25kXCIpKSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGNhbGxiYWNrKHsgZXZlbnQsIHJlcXVlc3QsIHJlc3BvbnNlIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbiAgYXN5bmMgX2F3YWl0Q29tcGxldGUocmVzcG9uc2VEb25lLCBoYW5kbGVyLCByZXF1ZXN0LCBldmVudCkge1xuICAgIGxldCByZXNwb25zZTtcbiAgICBsZXQgZXJyb3I7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2VEb25lO1xuICAgIH0gY2F0Y2ggKGVycm9yMikge1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgYXdhaXQgaGFuZGxlci5ydW5DYWxsYmFja3MoXCJoYW5kbGVyRGlkUmVzcG9uZFwiLCB7XG4gICAgICAgIGV2ZW50LFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICByZXNwb25zZVxuICAgICAgfSk7XG4gICAgICBhd2FpdCBoYW5kbGVyLmRvbmVXYWl0aW5nKCk7XG4gICAgfSBjYXRjaCAod2FpdFVudGlsRXJyb3IpIHtcbiAgICAgIGlmICh3YWl0VW50aWxFcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGVycm9yID0gd2FpdFVudGlsRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IGhhbmRsZXIucnVuQ2FsbGJhY2tzKFwiaGFuZGxlckRpZENvbXBsZXRlXCIsIHtcbiAgICAgIGV2ZW50LFxuICAgICAgcmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgZXJyb3JcbiAgICB9KTtcbiAgICBoYW5kbGVyLmRlc3Ryb3koKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBQcmVjYWNoZVN0cmF0ZWd5IGV4dGVuZHMgU3RyYXRlZ3kge1xuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FjaGVOYW1lXSBDYWNoZSBuYW1lIHRvIHN0b3JlIGFuZCByZXRyaWV2ZVxuICAgKiByZXF1ZXN0cy4gRGVmYXVsdHMgdG8gdGhlIGNhY2hlIG5hbWVzIHByb3ZpZGVkIGJ5XG4gICAqIHtAbGluayB3b3JrYm94LWNvcmUuY2FjaGVOYW1lc30uXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gW29wdGlvbnMucGx1Z2luc10ge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi90b29scy93b3JrYm94L2d1aWRlcy91c2luZy1wbHVnaW5zfFBsdWdpbnN9XG4gICAqIHRvIHVzZSBpbiBjb25qdW5jdGlvbiB3aXRoIHRoaXMgY2FjaGluZyBzdHJhdGVneS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmZldGNoT3B0aW9uc10gVmFsdWVzIHBhc3NlZCBhbG9uZyB0byB0aGVcbiAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dPcldvcmtlckdsb2JhbFNjb3BlL2ZldGNoI1BhcmFtZXRlcnN8aW5pdH1cbiAgICogb2YgYWxsIGZldGNoKCkgcmVxdWVzdHMgbWFkZSBieSB0aGlzIHN0cmF0ZWd5LlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMubWF0Y2hPcHRpb25zXSBUaGVcbiAgICoge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9TZXJ2aWNlV29ya2VyLyNkaWN0ZGVmLWNhY2hlcXVlcnlvcHRpb25zfENhY2hlUXVlcnlPcHRpb25zfVxuICAgKiBmb3IgYW55IGBjYWNoZS5tYXRjaCgpYCBvciBgY2FjaGUucHV0KClgIGNhbGxzIG1hZGUgYnkgdGhpcyBzdHJhdGVneS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5mYWxsYmFja1RvTmV0d29yaz10cnVlXSBXaGV0aGVyIHRvIGF0dGVtcHQgdG9cbiAgICogZ2V0IHRoZSByZXNwb25zZSBmcm9tIHRoZSBuZXR3b3JrIGlmIHRoZXJlJ3MgYSBwcmVjYWNoZSBtaXNzLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5jYWNoZU5hbWUgPSBjYWNoZU5hbWVzLmdldFByZWNhY2hlTmFtZShvcHRpb25zLmNhY2hlTmFtZSk7XG4gICAgc3VwZXIob3B0aW9ucyk7XG4gICAgdGhpcy5fZmFsbGJhY2tUb05ldHdvcmsgPSBvcHRpb25zLmZhbGxiYWNrVG9OZXR3b3JrID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgICB0aGlzLnBsdWdpbnMucHVzaChQcmVjYWNoZVN0cmF0ZWd5LmNvcHlSZWRpcmVjdGVkQ2FjaGVhYmxlUmVzcG9uc2VzUGx1Z2luKTtcbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtSZXF1ZXN0fHN0cmluZ30gcmVxdWVzdCBBIHJlcXVlc3QgdG8gcnVuIHRoaXMgc3RyYXRlZ3kgZm9yLlxuICAgKiBAcGFyYW0ge3dvcmtib3gtc3RyYXRlZ2llcy5TdHJhdGVneUhhbmRsZXJ9IGhhbmRsZXIgVGhlIGV2ZW50IHRoYXRcbiAgICogICAgIHRyaWdnZXJlZCB0aGUgcmVxdWVzdC5cbiAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAqL1xuICBhc3luYyBfaGFuZGxlKHJlcXVlc3QsIGhhbmRsZXIpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIuY2FjaGVNYXRjaChyZXF1ZXN0KTtcbiAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgaWYgKGhhbmRsZXIuZXZlbnQgJiYgaGFuZGxlci5ldmVudC50eXBlID09PSBcImluc3RhbGxcIikge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2hhbmRsZUluc3RhbGwocmVxdWVzdCwgaGFuZGxlcik7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLl9oYW5kbGVGZXRjaChyZXF1ZXN0LCBoYW5kbGVyKTtcbiAgfVxuICBhc3luYyBfaGFuZGxlRmV0Y2gocmVxdWVzdCwgaGFuZGxlcikge1xuICAgIGxldCByZXNwb25zZTtcbiAgICBjb25zdCBwYXJhbXMgPSBoYW5kbGVyLnBhcmFtcyB8fCB7fTtcbiAgICBpZiAodGhpcy5fZmFsbGJhY2tUb05ldHdvcmspIHtcbiAgICAgIGNvbnN0IGludGVncml0eUluTWFuaWZlc3QgPSBwYXJhbXMuaW50ZWdyaXR5O1xuICAgICAgY29uc3QgaW50ZWdyaXR5SW5SZXF1ZXN0ID0gcmVxdWVzdC5pbnRlZ3JpdHk7XG4gICAgICBjb25zdCBub0ludGVncml0eUNvbmZsaWN0ID0gIWludGVncml0eUluUmVxdWVzdCB8fCBpbnRlZ3JpdHlJblJlcXVlc3QgPT09IGludGVncml0eUluTWFuaWZlc3Q7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIuZmV0Y2gobmV3IFJlcXVlc3QocmVxdWVzdCwge1xuICAgICAgICBpbnRlZ3JpdHk6IHJlcXVlc3QubW9kZSAhPT0gXCJuby1jb3JzXCIgPyBpbnRlZ3JpdHlJblJlcXVlc3QgfHwgaW50ZWdyaXR5SW5NYW5pZmVzdCA6IHZvaWQgMFxuICAgICAgfSkpO1xuICAgICAgaWYgKGludGVncml0eUluTWFuaWZlc3QgJiYgbm9JbnRlZ3JpdHlDb25mbGljdCAmJiByZXF1ZXN0Lm1vZGUgIT09IFwibm8tY29yc1wiKSB7XG4gICAgICAgIHRoaXMuX3VzZURlZmF1bHRDYWNoZWFiaWxpdHlQbHVnaW5JZk5lZWRlZCgpO1xuICAgICAgICBhd2FpdCBoYW5kbGVyLmNhY2hlUHV0KHJlcXVlc3QsIHJlc3BvbnNlLmNsb25lKCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKFwibWlzc2luZy1wcmVjYWNoZS1lbnRyeVwiLCB7XG4gICAgICAgIGNhY2hlTmFtZTogdGhpcy5jYWNoZU5hbWUsXG4gICAgICAgIHVybDogcmVxdWVzdC51cmxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbiAgYXN5bmMgX2hhbmRsZUluc3RhbGwocmVxdWVzdCwgaGFuZGxlcikge1xuICAgIHRoaXMuX3VzZURlZmF1bHRDYWNoZWFiaWxpdHlQbHVnaW5JZk5lZWRlZCgpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlci5mZXRjaChyZXF1ZXN0KTtcbiAgICBjb25zdCB3YXNDYWNoZWQgPSBhd2FpdCBoYW5kbGVyLmNhY2hlUHV0KHJlcXVlc3QsIHJlc3BvbnNlLmNsb25lKCkpO1xuICAgIGlmICghd2FzQ2FjaGVkKSB7XG4gICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKFwiYmFkLXByZWNhY2hpbmctcmVzcG9uc2VcIiwge1xuICAgICAgICB1cmw6IHJlcXVlc3QudXJsLFxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1c1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgY29tcGxleCwgYXMgdGhlcmUgYSBudW1iZXIgb2YgdGhpbmdzIHRvIGFjY291bnQgZm9yOlxuICAgKlxuICAgKiBUaGUgYHBsdWdpbnNgIGFycmF5IGNhbiBiZSBzZXQgYXQgY29uc3RydWN0aW9uLCBhbmQvb3IgaXQgbWlnaHQgYmUgYWRkZWQgdG9cbiAgICogdG8gYXQgYW55IHRpbWUgYmVmb3JlIHRoZSBzdHJhdGVneSBpcyB1c2VkLlxuICAgKlxuICAgKiBBdCB0aGUgdGltZSB0aGUgc3RyYXRlZ3kgaXMgdXNlZCAoaS5lLiBkdXJpbmcgYW4gYGluc3RhbGxgIGV2ZW50KSwgdGhlcmVcbiAgICogbmVlZHMgdG8gYmUgYXQgbGVhc3Qgb25lIHBsdWdpbiB0aGF0IGltcGxlbWVudHMgYGNhY2hlV2lsbFVwZGF0ZWAgaW4gdGhlXG4gICAqIGFycmF5LCBvdGhlciB0aGFuIGBjb3B5UmVkaXJlY3RlZENhY2hlYWJsZVJlc3BvbnNlc1BsdWdpbmAuXG4gICAqXG4gICAqIC0gSWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGFuZCB0aGVyZSBhcmUgbm8gc3VpdGFibGUgYGNhY2hlV2lsbFVwZGF0ZWBcbiAgICogcGx1Z2lucywgd2UgbmVlZCB0byBhZGQgYGRlZmF1bHRQcmVjYWNoZUNhY2hlYWJpbGl0eVBsdWdpbmAuXG4gICAqXG4gICAqIC0gSWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGFuZCB0aGVyZSBpcyBleGFjdGx5IG9uZSBgY2FjaGVXaWxsVXBkYXRlYCwgdGhlblxuICAgKiB3ZSBkb24ndCBoYXZlIHRvIGRvIGFueXRoaW5nICh0aGlzIG1pZ2h0IGJlIGEgcHJldmlvdXNseSBhZGRlZFxuICAgKiBgZGVmYXVsdFByZWNhY2hlQ2FjaGVhYmlsaXR5UGx1Z2luYCwgb3IgaXQgbWlnaHQgYmUgYSBjdXN0b20gcGx1Z2luKS5cbiAgICpcbiAgICogLSBJZiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYW5kIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgYGNhY2hlV2lsbFVwZGF0ZWAsXG4gICAqIHRoZW4gd2UgbmVlZCB0byBjaGVjayBpZiBvbmUgaXMgYGRlZmF1bHRQcmVjYWNoZUNhY2hlYWJpbGl0eVBsdWdpbmAuIElmIHNvLFxuICAgKiB3ZSBuZWVkIHRvIHJlbW92ZSBpdC4gKFRoaXMgc2l0dWF0aW9uIGlzIHVubGlrZWx5LCBidXQgaXQgY291bGQgaGFwcGVuIGlmXG4gICAqIHRoZSBzdHJhdGVneSBpcyB1c2VkIG11bHRpcGxlIHRpbWVzLCB0aGUgZmlyc3Qgd2l0aG91dCBhIGBjYWNoZVdpbGxVcGRhdGVgLFxuICAgKiBhbmQgdGhlbiBsYXRlciBvbiBhZnRlciBtYW51YWxseSBhZGRpbmcgYSBjdXN0b20gYGNhY2hlV2lsbFVwZGF0ZWAuKVxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS93b3JrYm94L2lzc3Vlcy8yNzM3IGZvciBtb3JlIGNvbnRleHQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXNlRGVmYXVsdENhY2hlYWJpbGl0eVBsdWdpbklmTmVlZGVkKCkge1xuICAgIGxldCBkZWZhdWx0UGx1Z2luSW5kZXggPSBudWxsO1xuICAgIGxldCBjYWNoZVdpbGxVcGRhdGVQbHVnaW5Db3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBbaW5kZXgsIHBsdWdpbl0gb2YgdGhpcy5wbHVnaW5zLmVudHJpZXMoKSkge1xuICAgICAgaWYgKHBsdWdpbiA9PT0gUHJlY2FjaGVTdHJhdGVneS5jb3B5UmVkaXJlY3RlZENhY2hlYWJsZVJlc3BvbnNlc1BsdWdpbikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwbHVnaW4gPT09IFByZWNhY2hlU3RyYXRlZ3kuZGVmYXVsdFByZWNhY2hlQ2FjaGVhYmlsaXR5UGx1Z2luKSB7XG4gICAgICAgIGRlZmF1bHRQbHVnaW5JbmRleCA9IGluZGV4O1xuICAgICAgfVxuICAgICAgaWYgKHBsdWdpbi5jYWNoZVdpbGxVcGRhdGUpIHtcbiAgICAgICAgY2FjaGVXaWxsVXBkYXRlUGx1Z2luQ291bnQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNhY2hlV2lsbFVwZGF0ZVBsdWdpbkNvdW50ID09PSAwKSB7XG4gICAgICB0aGlzLnBsdWdpbnMucHVzaChQcmVjYWNoZVN0cmF0ZWd5LmRlZmF1bHRQcmVjYWNoZUNhY2hlYWJpbGl0eVBsdWdpbik7XG4gICAgfSBlbHNlIGlmIChjYWNoZVdpbGxVcGRhdGVQbHVnaW5Db3VudCA+IDEgJiYgZGVmYXVsdFBsdWdpbkluZGV4ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnBsdWdpbnMuc3BsaWNlKGRlZmF1bHRQbHVnaW5JbmRleCwgMSk7XG4gICAgfVxuICB9XG59XG5QcmVjYWNoZVN0cmF0ZWd5LmRlZmF1bHRQcmVjYWNoZUNhY2hlYWJpbGl0eVBsdWdpbiA9IHtcbiAgYXN5bmMgY2FjaGVXaWxsVXBkYXRlKHsgcmVzcG9uc2UgfSkge1xuICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxufTtcblByZWNhY2hlU3RyYXRlZ3kuY29weVJlZGlyZWN0ZWRDYWNoZWFibGVSZXNwb25zZXNQbHVnaW4gPSB7XG4gIGFzeW5jIGNhY2hlV2lsbFVwZGF0ZSh7IHJlc3BvbnNlIH0pIHtcbiAgICByZXR1cm4gcmVzcG9uc2UucmVkaXJlY3RlZCA/IGF3YWl0IGNvcHlSZXNwb25zZShyZXNwb25zZSkgOiByZXNwb25zZTtcbiAgfVxufTtcblxuY2xhc3MgUHJlY2FjaGVDb250cm9sbGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBQcmVjYWNoZUNvbnRyb2xsZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNhY2hlTmFtZV0gVGhlIGNhY2hlIHRvIHVzZSBmb3IgcHJlY2FjaGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBsdWdpbnNdIFBsdWdpbnMgdG8gdXNlIHdoZW4gcHJlY2FjaGluZyBhcyB3ZWxsXG4gICAqIGFzIHJlc3BvbmRpbmcgdG8gZmV0Y2ggZXZlbnRzIGZvciBwcmVjYWNoZWQgYXNzZXRzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmZhbGxiYWNrVG9OZXR3b3JrPXRydWVdIFdoZXRoZXIgdG8gYXR0ZW1wdCB0b1xuICAgKiBnZXQgdGhlIHJlc3BvbnNlIGZyb20gdGhlIG5ldHdvcmsgaWYgdGhlcmUncyBhIHByZWNhY2hlIG1pc3MuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGNhY2hlTmFtZSwgcGx1Z2lucyA9IFtdLCBmYWxsYmFja1RvTmV0d29yayA9IHRydWUgfSA9IHt9KSB7XG4gICAgdGhpcy5fdXJsc1RvQ2FjaGVLZXlzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl91cmxzVG9DYWNoZU1vZGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl9jYWNoZUtleXNUb0ludGVncml0aWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl9zdHJhdGVneSA9IG5ldyBQcmVjYWNoZVN0cmF0ZWd5KHtcbiAgICAgIGNhY2hlTmFtZTogY2FjaGVOYW1lcy5nZXRQcmVjYWNoZU5hbWUoY2FjaGVOYW1lKSxcbiAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgLi4ucGx1Z2lucyxcbiAgICAgICAgbmV3IFByZWNhY2hlQ2FjaGVLZXlQbHVnaW4oeyBwcmVjYWNoZUNvbnRyb2xsZXI6IHRoaXMgfSlcbiAgICAgIF0sXG4gICAgICBmYWxsYmFja1RvTmV0d29ya1xuICAgIH0pO1xuICAgIHRoaXMuaW5zdGFsbCA9IHRoaXMuaW5zdGFsbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWN0aXZhdGUgPSB0aGlzLmFjdGl2YXRlLmJpbmQodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEB0eXBlIHt3b3JrYm94LXByZWNhY2hpbmcuUHJlY2FjaGVTdHJhdGVneX0gVGhlIHN0cmF0ZWd5IGNyZWF0ZWQgYnkgdGhpcyBjb250cm9sbGVyIGFuZFxuICAgKiB1c2VkIHRvIGNhY2hlIGFzc2V0cyBhbmQgcmVzcG9uZCB0byBmZXRjaCBldmVudHMuXG4gICAqL1xuICBnZXQgc3RyYXRlZ3koKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmF0ZWd5O1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGl0ZW1zIHRvIHRoZSBwcmVjYWNoZSBsaXN0LCByZW1vdmluZyBhbnkgZHVwbGljYXRlcyBhbmRcbiAgICogc3RvcmVzIHRoZSBmaWxlcyBpbiB0aGVcbiAgICoge0BsaW5rIHdvcmtib3gtY29yZS5jYWNoZU5hbWVzfFwicHJlY2FjaGUgY2FjaGVcIn0gd2hlbiB0aGUgc2VydmljZVxuICAgKiB3b3JrZXIgaW5zdGFsbHMuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0fHN0cmluZz59IFtlbnRyaWVzPVtdXSBBcnJheSBvZiBlbnRyaWVzIHRvIHByZWNhY2hlLlxuICAgKi9cbiAgcHJlY2FjaGUoZW50cmllcykge1xuICAgIHRoaXMuYWRkVG9DYWNoZUxpc3QoZW50cmllcyk7XG4gICAgaWYgKCF0aGlzLl9pbnN0YWxsQW5kQWN0aXZlTGlzdGVuZXJzQWRkZWQpIHtcbiAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImluc3RhbGxcIiwgdGhpcy5pbnN0YWxsKTtcbiAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImFjdGl2YXRlXCIsIHRoaXMuYWN0aXZhdGUpO1xuICAgICAgdGhpcy5faW5zdGFsbEFuZEFjdGl2ZUxpc3RlbmVyc0FkZGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWRkIGl0ZW1zIHRvIHRoZSBwcmVjYWNoZSBsaXN0LCByZW1vdmluZyBkdXBsaWNhdGVzXG4gICAqIGFuZCBlbnN1cmluZyB0aGUgaW5mb3JtYXRpb24gaXMgdmFsaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk8d29ya2JveC1wcmVjYWNoaW5nLlByZWNhY2hlQ29udHJvbGxlci5QcmVjYWNoZUVudHJ5fHN0cmluZz59IGVudHJpZXNcbiAgICogICAgIEFycmF5IG9mIGVudHJpZXMgdG8gcHJlY2FjaGUuXG4gICAqL1xuICBhZGRUb0NhY2hlTGlzdChlbnRyaWVzKSB7XG4gICAgY29uc3QgdXJsc1RvV2FybkFib3V0ID0gW107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHVybHNUb1dhcm5BYm91dC5wdXNoKGVudHJ5KTtcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkgJiYgZW50cnkucmV2aXNpb24gPT09IHZvaWQgMCkge1xuICAgICAgICB1cmxzVG9XYXJuQWJvdXQucHVzaChlbnRyeS51cmwpO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBjYWNoZUtleSwgdXJsIH0gPSBjcmVhdGVDYWNoZUtleShlbnRyeSk7XG4gICAgICBjb25zdCBjYWNoZU1vZGUgPSB0eXBlb2YgZW50cnkgIT09IFwic3RyaW5nXCIgJiYgZW50cnkucmV2aXNpb24gPyBcInJlbG9hZFwiIDogXCJkZWZhdWx0XCI7XG4gICAgICBpZiAodGhpcy5fdXJsc1RvQ2FjaGVLZXlzLmhhcyh1cmwpICYmIHRoaXMuX3VybHNUb0NhY2hlS2V5cy5nZXQodXJsKSAhPT0gY2FjaGVLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihcImFkZC10by1jYWNoZS1saXN0LWNvbmZsaWN0aW5nLWVudHJpZXNcIiwge1xuICAgICAgICAgIGZpcnN0RW50cnk6IHRoaXMuX3VybHNUb0NhY2hlS2V5cy5nZXQodXJsKSxcbiAgICAgICAgICBzZWNvbmRFbnRyeTogY2FjaGVLZXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ICE9PSBcInN0cmluZ1wiICYmIGVudHJ5LmludGVncml0eSkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVLZXlzVG9JbnRlZ3JpdGllcy5oYXMoY2FjaGVLZXkpICYmIHRoaXMuX2NhY2hlS2V5c1RvSW50ZWdyaXRpZXMuZ2V0KGNhY2hlS2V5KSAhPT0gZW50cnkuaW50ZWdyaXR5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihcImFkZC10by1jYWNoZS1saXN0LWNvbmZsaWN0aW5nLWludGVncml0aWVzXCIsIHtcbiAgICAgICAgICAgIHVybFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhY2hlS2V5c1RvSW50ZWdyaXRpZXMuc2V0KGNhY2hlS2V5LCBlbnRyeS5pbnRlZ3JpdHkpO1xuICAgICAgfVxuICAgICAgdGhpcy5fdXJsc1RvQ2FjaGVLZXlzLnNldCh1cmwsIGNhY2hlS2V5KTtcbiAgICAgIHRoaXMuX3VybHNUb0NhY2hlTW9kZXMuc2V0KHVybCwgY2FjaGVNb2RlKTtcbiAgICAgIGlmICh1cmxzVG9XYXJuQWJvdXQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB3YXJuaW5nTWVzc2FnZSA9IGBXb3JrYm94IGlzIHByZWNhY2hpbmcgVVJMcyB3aXRob3V0IHJldmlzaW9uIGluZm86ICR7dXJsc1RvV2FybkFib3V0LmpvaW4oXCIsIFwiKX1cblRoaXMgaXMgZ2VuZXJhbGx5IE5PVCBzYWZlLiBMZWFybiBtb3JlIGF0IGh0dHBzOi8vYml0Lmx5L3diLXByZWNhY2hlYDtcbiAgICAgICAge1xuICAgICAgICAgIGNvbnNvbGUud2Fybih3YXJuaW5nTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFByZWNhY2hlcyBuZXcgYW5kIHVwZGF0ZWQgYXNzZXRzLiBDYWxsIHRoaXMgbWV0aG9kIGZyb20gdGhlIHNlcnZpY2Ugd29ya2VyXG4gICAqIGluc3RhbGwgZXZlbnQuXG4gICAqXG4gICAqIE5vdGU6IHRoaXMgbWV0aG9kIGNhbGxzIGBldmVudC53YWl0VW50aWwoKWAgZm9yIHlvdSwgc28geW91IGRvIG5vdCBuZWVkXG4gICAqIHRvIGNhbGwgaXQgeW91cnNlbGYgaW4geW91ciBldmVudCBoYW5kbGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtFeHRlbmRhYmxlRXZlbnR9IGV2ZW50XG4gICAqIEByZXR1cm4ge1Byb21pc2U8d29ya2JveC1wcmVjYWNoaW5nLkluc3RhbGxSZXN1bHQ+fVxuICAgKi9cbiAgaW5zdGFsbChldmVudCkge1xuICAgIHJldHVybiB3YWl0VW50aWwoZXZlbnQsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbGxSZXBvcnRQbHVnaW4gPSBuZXcgUHJlY2FjaGVJbnN0YWxsUmVwb3J0UGx1Z2luKCk7XG4gICAgICB0aGlzLnN0cmF0ZWd5LnBsdWdpbnMucHVzaChpbnN0YWxsUmVwb3J0UGx1Z2luKTtcbiAgICAgIGZvciAoY29uc3QgW3VybCwgY2FjaGVLZXldIG9mIHRoaXMuX3VybHNUb0NhY2hlS2V5cykge1xuICAgICAgICBjb25zdCBpbnRlZ3JpdHkgPSB0aGlzLl9jYWNoZUtleXNUb0ludGVncml0aWVzLmdldChjYWNoZUtleSk7XG4gICAgICAgIGNvbnN0IGNhY2hlTW9kZSA9IHRoaXMuX3VybHNUb0NhY2hlTW9kZXMuZ2V0KHVybCk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgICAgICBpbnRlZ3JpdHksXG4gICAgICAgICAgY2FjaGU6IGNhY2hlTW9kZSxcbiAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLnN0cmF0ZWd5LmhhbmRsZUFsbCh7XG4gICAgICAgICAgcGFyYW1zOiB7IGNhY2hlS2V5IH0sXG4gICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICBldmVudFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IHVwZGF0ZWRVUkxzLCBub3RVcGRhdGVkVVJMcyB9ID0gaW5zdGFsbFJlcG9ydFBsdWdpbjtcbiAgICAgIHJldHVybiB7IHVwZGF0ZWRVUkxzLCBub3RVcGRhdGVkVVJMcyB9O1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGVzIGFzc2V0cyB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudCBpbiB0aGUgY3VycmVudCBwcmVjYWNoZSBtYW5pZmVzdC5cbiAgICogQ2FsbCB0aGlzIG1ldGhvZCBmcm9tIHRoZSBzZXJ2aWNlIHdvcmtlciBhY3RpdmF0ZSBldmVudC5cbiAgICpcbiAgICogTm90ZTogdGhpcyBtZXRob2QgY2FsbHMgYGV2ZW50LndhaXRVbnRpbCgpYCBmb3IgeW91LCBzbyB5b3UgZG8gbm90IG5lZWRcbiAgICogdG8gY2FsbCBpdCB5b3Vyc2VsZiBpbiB5b3VyIGV2ZW50IGhhbmRsZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge0V4dGVuZGFibGVFdmVudH0gZXZlbnRcbiAgICogQHJldHVybiB7UHJvbWlzZTx3b3JrYm94LXByZWNhY2hpbmcuQ2xlYW51cFJlc3VsdD59XG4gICAqL1xuICBhY3RpdmF0ZShldmVudCkge1xuICAgIHJldHVybiB3YWl0VW50aWwoZXZlbnQsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgc2VsZi5jYWNoZXMub3Blbih0aGlzLnN0cmF0ZWd5LmNhY2hlTmFtZSk7XG4gICAgICBjb25zdCBjdXJyZW50bHlDYWNoZWRSZXF1ZXN0cyA9IGF3YWl0IGNhY2hlLmtleXMoKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkQ2FjaGVLZXlzID0gbmV3IFNldCh0aGlzLl91cmxzVG9DYWNoZUtleXMudmFsdWVzKCkpO1xuICAgICAgY29uc3QgZGVsZXRlZFVSTHMgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiBjdXJyZW50bHlDYWNoZWRSZXF1ZXN0cykge1xuICAgICAgICBpZiAoIWV4cGVjdGVkQ2FjaGVLZXlzLmhhcyhyZXF1ZXN0LnVybCkpIHtcbiAgICAgICAgICBhd2FpdCBjYWNoZS5kZWxldGUocmVxdWVzdCk7XG4gICAgICAgICAgZGVsZXRlZFVSTHMucHVzaChyZXF1ZXN0LnVybCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGRlbGV0ZWRVUkxzIH07XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXBwaW5nIG9mIGEgcHJlY2FjaGVkIFVSTCB0byB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBrZXksIHRha2luZ1xuICAgKiBpbnRvIGFjY291bnQgdGhlIHJldmlzaW9uIGluZm9ybWF0aW9uIGZvciB0aGUgVVJMLlxuICAgKlxuICAgKiBAcmV0dXJuIHtNYXA8c3RyaW5nLCBzdHJpbmc+fSBBIFVSTCB0byBjYWNoZSBrZXkgbWFwcGluZy5cbiAgICovXG4gIGdldFVSTHNUb0NhY2hlS2V5cygpIHtcbiAgICByZXR1cm4gdGhpcy5fdXJsc1RvQ2FjaGVLZXlzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgdGhlIFVSTHMgdGhhdCBoYXZlIGJlZW4gcHJlY2FjaGVkIGJ5IHRoZSBjdXJyZW50XG4gICAqIHNlcnZpY2Ugd29ya2VyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBUaGUgcHJlY2FjaGVkIFVSTHMuXG4gICAqL1xuICBnZXRDYWNoZWRVUkxzKCkge1xuICAgIHJldHVybiBbLi4udGhpcy5fdXJsc1RvQ2FjaGVLZXlzLmtleXMoKV07XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNhY2hlIGtleSB1c2VkIGZvciBzdG9yaW5nIGEgZ2l2ZW4gVVJMLiBJZiB0aGF0IFVSTCBpc1xuICAgKiB1bnZlcnNpb25lZCwgbGlrZSBgL2luZGV4Lmh0bWwnLCB0aGVuIHRoZSBjYWNoZSBrZXkgd2lsbCBiZSB0aGUgb3JpZ2luYWxcbiAgICogVVJMIHdpdGggYSBzZWFyY2ggcGFyYW1ldGVyIGFwcGVuZGVkIHRvIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEEgVVJMIHdob3NlIGNhY2hlIGtleSB5b3Ugd2FudCB0byBsb29rIHVwLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB2ZXJzaW9uZWQgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBjYWNoZSBrZXlcbiAgICogZm9yIHRoZSBvcmlnaW5hbCBVUkwsIG9yIHVuZGVmaW5lZCBpZiB0aGF0IFVSTCBpc24ndCBwcmVjYWNoZWQuXG4gICAqL1xuICBnZXRDYWNoZUtleUZvclVSTCh1cmwpIHtcbiAgICBjb25zdCB1cmxPYmplY3QgPSBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZik7XG4gICAgcmV0dXJuIHRoaXMuX3VybHNUb0NhY2hlS2V5cy5nZXQodXJsT2JqZWN0LmhyZWYpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEEgY2FjaGUga2V5IHdob3NlIFNSSSB5b3Ugd2FudCB0byBsb29rIHVwLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdWJyZXNvdXJjZSBpbnRlZ3JpdHkgYXNzb2NpYXRlZCB3aXRoIHRoZSBjYWNoZSBrZXksXG4gICAqIG9yIHVuZGVmaW5lZCBpZiBpdCdzIG5vdCBzZXQuXG4gICAqL1xuICBnZXRJbnRlZ3JpdHlGb3JDYWNoZUtleShjYWNoZUtleSkge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZUtleXNUb0ludGVncml0aWVzLmdldChjYWNoZUtleSk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgYWN0cyBhcyBhIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yXG4gICAqIFtgY2FjaGUubWF0Y2goKWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DYWNoZS9tYXRjaClcbiAgICogd2l0aCB0aGUgZm9sbG93aW5nIGRpZmZlcmVuY2VzOlxuICAgKlxuICAgKiAtIEl0IGtub3dzIHdoYXQgdGhlIG5hbWUgb2YgdGhlIHByZWNhY2hlIGlzLCBhbmQgb25seSBjaGVja3MgaW4gdGhhdCBjYWNoZS5cbiAgICogLSBJdCBhbGxvd3MgeW91IHRvIHBhc3MgaW4gYW4gXCJvcmlnaW5hbFwiIFVSTCB3aXRob3V0IHZlcnNpb25pbmcgcGFyYW1ldGVycyxcbiAgICogYW5kIGl0IHdpbGwgYXV0b21hdGljYWxseSBsb29rIHVwIHRoZSBjb3JyZWN0IGNhY2hlIGtleSBmb3IgdGhlIGN1cnJlbnRseVxuICAgKiBhY3RpdmUgcmV2aXNpb24gb2YgdGhhdCBVUkwuXG4gICAqXG4gICAqIEUuZy4sIGBtYXRjaFByZWNhY2hlKCdpbmRleC5odG1sJylgIHdpbGwgZmluZCB0aGUgY29ycmVjdCBwcmVjYWNoZWRcbiAgICogcmVzcG9uc2UgZm9yIHRoZSBjdXJyZW50bHkgYWN0aXZlIHNlcnZpY2Ugd29ya2VyLCBldmVuIGlmIHRoZSBhY3R1YWwgY2FjaGVcbiAgICoga2V5IGlzIGAnL2luZGV4Lmh0bWw/X19XQl9SRVZJU0lPTl9fPTEyMzRhYmNkJ2AuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlcXVlc3R9IHJlcXVlc3QgVGhlIGtleSAod2l0aG91dCByZXZpc2lvbmluZyBwYXJhbWV0ZXJzKVxuICAgKiB0byBsb29rIHVwIGluIHRoZSBwcmVjYWNoZS5cbiAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZXx1bmRlZmluZWQ+fVxuICAgKi9cbiAgYXN5bmMgbWF0Y2hQcmVjYWNoZShyZXF1ZXN0KSB7XG4gICAgY29uc3QgdXJsID0gcmVxdWVzdCBpbnN0YW5jZW9mIFJlcXVlc3QgPyByZXF1ZXN0LnVybCA6IHJlcXVlc3Q7XG4gICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdldENhY2hlS2V5Rm9yVVJMKHVybCk7XG4gICAgaWYgKGNhY2hlS2V5KSB7XG4gICAgICBjb25zdCBjYWNoZSA9IGF3YWl0IHNlbGYuY2FjaGVzLm9wZW4odGhpcy5zdHJhdGVneS5jYWNoZU5hbWUpO1xuICAgICAgcmV0dXJuIGNhY2hlLm1hdGNoKGNhY2hlS2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbG9va3MgdXAgYHVybGAgaW4gdGhlIHByZWNhY2hlICh0YWtpbmcgaW50b1xuICAgKiBhY2NvdW50IHJldmlzaW9uIGluZm9ybWF0aW9uKSwgYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgYFJlc3BvbnNlYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgcHJlY2FjaGVkIFVSTCB3aGljaCB3aWxsIGJlIHVzZWQgdG8gbG9va3VwIHRoZVxuICAgKiBgUmVzcG9uc2VgLlxuICAgKiBAcmV0dXJuIHt3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfVxuICAgKi9cbiAgY3JlYXRlSGFuZGxlckJvdW5kVG9VUkwodXJsKSB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdldENhY2hlS2V5Rm9yVVJMKHVybCk7XG4gICAgaWYgKCFjYWNoZUtleSkge1xuICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihcIm5vbi1wcmVjYWNoZWQtdXJsXCIsIHsgdXJsIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKG9wdGlvbnMpID0+IHtcbiAgICAgIG9wdGlvbnMucmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCk7XG4gICAgICBvcHRpb25zLnBhcmFtcyA9IE9iamVjdC5hc3NpZ24oeyBjYWNoZUtleSB9LCBvcHRpb25zLnBhcmFtcyk7XG4gICAgICByZXR1cm4gdGhpcy5zdHJhdGVneS5oYW5kbGUob3B0aW9ucyk7XG4gICAgfTtcbiAgfVxufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG5sZXQgcHJlY2FjaGVDb250cm9sbGVyO1xuLyoqXG4gKiBAcmV0dXJuIHtQcmVjYWNoZUNvbnRyb2xsZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBnZXRPckNyZWF0ZVByZWNhY2hlQ29udHJvbGxlciA9ICgpID0+IHtcbiAgICBpZiAoIXByZWNhY2hlQ29udHJvbGxlcikge1xuICAgICAgICBwcmVjYWNoZUNvbnRyb2xsZXIgPSBuZXcgUHJlY2FjaGVDb250cm9sbGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBwcmVjYWNoZUNvbnRyb2xsZXI7XG59O1xuXG4vLyBAdHMtaWdub3JlXG50cnkge1xuICAgIHNlbGZbJ3dvcmtib3g6cm91dGluZzo3LjAuMCddICYmIF8oKTtcbn1cbmNhdGNoIChlKSB7IH1cblxuLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBIVFRQIG1ldGhvZCwgJ0dFVCcsIHVzZWQgd2hlbiB0aGVyZSdzIG5vIHNwZWNpZmljIG1ldGhvZFxuICogY29uZmlndXJlZCBmb3IgYSByb3V0ZS5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGRlZmF1bHRNZXRob2QgPSAnR0VUJztcblxuY29uc3Qgbm9ybWFsaXplSGFuZGxlciA9IChoYW5kbGVyKSA9PiB7XG4gIGlmIChoYW5kbGVyICYmIHR5cGVvZiBoYW5kbGVyID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGhhbmRsZXI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgaGFuZGxlOiBoYW5kbGVyIH07XG4gIH1cbn07XG5cbmNsYXNzIFJvdXRlIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yIGZvciBSb3V0ZSBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmd+bWF0Y2hDYWxsYmFja30gbWF0Y2hcbiAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hldGhlciB0aGUgcm91dGUgbWF0Y2hlcyBhIGdpdmVuXG4gICAqIGBmZXRjaGAgZXZlbnQgYnkgcmV0dXJuaW5nIGEgbm9uLWZhbHN5IHZhbHVlLlxuICAgKiBAcGFyYW0ge3dvcmtib3gtcm91dGluZ35oYW5kbGVyQ2FsbGJhY2t9IGhhbmRsZXIgQSBjYWxsYmFja1xuICAgKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIHJlc29sdmluZyB0byBhIFJlc3BvbnNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW21ldGhvZD0nR0VUJ10gVGhlIEhUVFAgbWV0aG9kIHRvIG1hdGNoIHRoZSBSb3V0ZVxuICAgKiBhZ2FpbnN0LlxuICAgKi9cbiAgY29uc3RydWN0b3IobWF0Y2gsIGhhbmRsZXIsIG1ldGhvZCA9IGRlZmF1bHRNZXRob2QpIHtcbiAgICB0aGlzLmhhbmRsZXIgPSBub3JtYWxpemVIYW5kbGVyKGhhbmRsZXIpO1xuICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmctaGFuZGxlckNhbGxiYWNrfSBoYW5kbGVyIEEgY2FsbGJhY2tcbiAgICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZSByZXNvbHZpbmcgdG8gYSBSZXNwb25zZVxuICAgKi9cbiAgc2V0Q2F0Y2hIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLmNhdGNoSGFuZGxlciA9IG5vcm1hbGl6ZUhhbmRsZXIoaGFuZGxlcik7XG4gIH1cbn1cblxuY2xhc3MgUmVnRXhwUm91dGUgZXh0ZW5kcyBSb3V0ZSB7XG4gIC8qKlxuICAgKiBJZiB0aGUgcmVndWxhciBleHByZXNzaW9uIGNvbnRhaW5zXG4gICAqIFtjYXB0dXJlIGdyb3Vwc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUmVnRXhwI2dyb3VwaW5nLWJhY2stcmVmZXJlbmNlc30sXG4gICAqIHRoZSBjYXB0dXJlZCB2YWx1ZXMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlXG4gICAqIHtAbGluayB3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfSBgcGFyYW1zYFxuICAgKiBhcmd1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ0V4cCBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QgVVJMcy5cbiAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfSBoYW5kbGVyIEEgY2FsbGJhY2tcbiAgICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZSByZXN1bHRpbmcgaW4gYSBSZXNwb25zZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFttZXRob2Q9J0dFVCddIFRoZSBIVFRQIG1ldGhvZCB0byBtYXRjaCB0aGUgUm91dGVcbiAgICogYWdhaW5zdC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHJlZ0V4cCwgaGFuZGxlciwgbWV0aG9kKSB7XG4gICAgY29uc3QgbWF0Y2ggPSAoeyB1cmwgfSkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gcmVnRXhwLmV4ZWModXJsLmhyZWYpO1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHVybC5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbiAmJiByZXN1bHQuaW5kZXggIT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdC5zbGljZSgxKTtcbiAgICB9O1xuICAgIHN1cGVyKG1hdGNoLCBoYW5kbGVyLCBtZXRob2QpO1xuICB9XG59XG5cbmNsYXNzIFJvdXRlciB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBhIG5ldyBSb3V0ZXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9yb3V0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMuX2RlZmF1bHRIYW5kbGVyTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiB7TWFwPHN0cmluZywgQXJyYXk8d29ya2JveC1yb3V0aW5nLlJvdXRlPj59IHJvdXRlcyBBIGBNYXBgIG9mIEhUVFBcbiAgICogbWV0aG9kIG5hbWUgKCdHRVQnLCBldGMuKSB0byBhbiBhcnJheSBvZiBhbGwgdGhlIGNvcnJlc3BvbmRpbmcgYFJvdXRlYFxuICAgKiBpbnN0YW5jZXMgdGhhdCBhcmUgcmVnaXN0ZXJlZC5cbiAgICovXG4gIGdldCByb3V0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JvdXRlcztcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIGZldGNoIGV2ZW50IGxpc3RlbmVyIHRvIHJlc3BvbmQgdG8gZXZlbnRzIHdoZW4gYSByb3V0ZSBtYXRjaGVzXG4gICAqIHRoZSBldmVudCdzIHJlcXVlc3QuXG4gICAqL1xuICBhZGRGZXRjaExpc3RlbmVyKCkge1xuICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImZldGNoXCIsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyByZXF1ZXN0IH0gPSBldmVudDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlUHJvbWlzZSA9IHRoaXMuaGFuZGxlUmVxdWVzdCh7IHJlcXVlc3QsIGV2ZW50IH0pO1xuICAgICAgaWYgKHJlc3BvbnNlUHJvbWlzZSkge1xuICAgICAgICBldmVudC5yZXNwb25kV2l0aChyZXNwb25zZVByb21pc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgbWVzc2FnZSBldmVudCBsaXN0ZW5lciBmb3IgVVJMcyB0byBjYWNoZSBmcm9tIHRoZSB3aW5kb3cuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHRvIGNhY2hlIHJlc291cmNlcyBsb2FkZWQgb24gdGhlIHBhZ2UgcHJpb3IgdG8gd2hlbiB0aGVcbiAgICogc2VydmljZSB3b3JrZXIgc3RhcnRlZCBjb250cm9sbGluZyBpdC5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBvZiB0aGUgbWVzc2FnZSBkYXRhIHNlbnQgZnJvbSB0aGUgd2luZG93IHNob3VsZCBiZSBhcyBmb2xsb3dzLlxuICAgKiBXaGVyZSB0aGUgYHVybHNUb0NhY2hlYCBhcnJheSBtYXkgY29uc2lzdCBvZiBVUkwgc3RyaW5ncyBvciBhbiBhcnJheSBvZlxuICAgKiBVUkwgc3RyaW5nICsgYHJlcXVlc3RJbml0YCBvYmplY3QgKHRoZSBzYW1lIGFzIHlvdSdkIHBhc3MgdG8gYGZldGNoKClgKS5cbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICB0eXBlOiAnQ0FDSEVfVVJMUycsXG4gICAqICAgcGF5bG9hZDoge1xuICAgKiAgICAgdXJsc1RvQ2FjaGU6IFtcbiAgICogICAgICAgJy4vc2NyaXB0MS5qcycsXG4gICAqICAgICAgICcuL3NjcmlwdDIuanMnLFxuICAgKiAgICAgICBbJy4vc2NyaXB0My5qcycsIHttb2RlOiAnbm8tY29ycyd9XSxcbiAgICogICAgIF0sXG4gICAqICAgfSxcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGFkZENhY2hlTGlzdGVuZXIoKSB7XG4gICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEudHlwZSA9PT0gXCJDQUNIRV9VUkxTXCIpIHtcbiAgICAgICAgY29uc3QgeyBwYXlsb2FkIH0gPSBldmVudC5kYXRhO1xuICAgICAgICBjb25zdCByZXF1ZXN0UHJvbWlzZXMgPSBQcm9taXNlLmFsbChwYXlsb2FkLnVybHNUb0NhY2hlLm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBlbnRyeSA9IFtlbnRyeV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCguLi5lbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUmVxdWVzdCh7IHJlcXVlc3QsIGV2ZW50IH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIGV2ZW50LndhaXRVbnRpbChyZXF1ZXN0UHJvbWlzZXMpO1xuICAgICAgICBpZiAoZXZlbnQucG9ydHMgJiYgZXZlbnQucG9ydHNbMF0pIHtcbiAgICAgICAgICB2b2lkIHJlcXVlc3RQcm9taXNlcy50aGVuKCgpID0+IGV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSB0aGUgcm91dGluZyBydWxlcyB0byBhIEZldGNoRXZlbnQgb2JqZWN0IHRvIGdldCBhIFJlc3BvbnNlIGZyb20gYW5cbiAgICogYXBwcm9wcmlhdGUgUm91dGUncyBoYW5kbGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1JlcXVlc3R9IG9wdGlvbnMucmVxdWVzdCBUaGUgcmVxdWVzdCB0byBoYW5kbGUuXG4gICAqIEBwYXJhbSB7RXh0ZW5kYWJsZUV2ZW50fSBvcHRpb25zLmV2ZW50IFRoZSBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGVcbiAgICogICAgIHJlcXVlc3QuXG4gICAqIEByZXR1cm4ge1Byb21pc2U8UmVzcG9uc2U+fHVuZGVmaW5lZH0gQSBwcm9taXNlIGlzIHJldHVybmVkIGlmIGFcbiAgICogICAgIHJlZ2lzdGVyZWQgcm91dGUgY2FuIGhhbmRsZSB0aGUgcmVxdWVzdC4gSWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmdcbiAgICogICAgIHJvdXRlIGFuZCB0aGVyZSdzIG5vIGBkZWZhdWx0SGFuZGxlcmAsIGB1bmRlZmluZWRgIGlzIHJldHVybmVkLlxuICAgKi9cbiAgaGFuZGxlUmVxdWVzdCh7IHJlcXVlc3QsIGV2ZW50IH0pIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsLCBsb2NhdGlvbi5ocmVmKTtcbiAgICBpZiAoIXVybC5wcm90b2NvbC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzYW1lT3JpZ2luID0gdXJsLm9yaWdpbiA9PT0gbG9jYXRpb24ub3JpZ2luO1xuICAgIGNvbnN0IHsgcGFyYW1zLCByb3V0ZSB9ID0gdGhpcy5maW5kTWF0Y2hpbmdSb3V0ZSh7XG4gICAgICBldmVudCxcbiAgICAgIHJlcXVlc3QsXG4gICAgICBzYW1lT3JpZ2luLFxuICAgICAgdXJsXG4gICAgfSk7XG4gICAgbGV0IGhhbmRsZXIgPSByb3V0ZSAmJiByb3V0ZS5oYW5kbGVyO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcXVlc3QubWV0aG9kO1xuICAgIGlmICghaGFuZGxlciAmJiB0aGlzLl9kZWZhdWx0SGFuZGxlck1hcC5oYXMobWV0aG9kKSkge1xuICAgICAgaGFuZGxlciA9IHRoaXMuX2RlZmF1bHRIYW5kbGVyTWFwLmdldChtZXRob2QpO1xuICAgIH1cbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHJlc3BvbnNlUHJvbWlzZTtcbiAgICB0cnkge1xuICAgICAgcmVzcG9uc2VQcm9taXNlID0gaGFuZGxlci5oYW5kbGUoeyB1cmwsIHJlcXVlc3QsIGV2ZW50LCBwYXJhbXMgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXNwb25zZVByb21pc2UgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgIH1cbiAgICBjb25zdCBjYXRjaEhhbmRsZXIgPSByb3V0ZSAmJiByb3V0ZS5jYXRjaEhhbmRsZXI7XG4gICAgaWYgKHJlc3BvbnNlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UgJiYgKHRoaXMuX2NhdGNoSGFuZGxlciB8fCBjYXRjaEhhbmRsZXIpKSB7XG4gICAgICByZXNwb25zZVByb21pc2UgPSByZXNwb25zZVByb21pc2UuY2F0Y2goYXN5bmMgKGVycikgPT4ge1xuICAgICAgICBpZiAoY2F0Y2hIYW5kbGVyKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjYXRjaEhhbmRsZXIuaGFuZGxlKHsgdXJsLCByZXF1ZXN0LCBldmVudCwgcGFyYW1zIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGNhdGNoRXJyKSB7XG4gICAgICAgICAgICBpZiAoY2F0Y2hFcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICBlcnIgPSBjYXRjaEVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2NhdGNoSGFuZGxlcikge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jYXRjaEhhbmRsZXIuaGFuZGxlKHsgdXJsLCByZXF1ZXN0LCBldmVudCB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlUHJvbWlzZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2tzIGEgcmVxdWVzdCBhbmQgVVJMIChhbmQgb3B0aW9uYWxseSBhbiBldmVudCkgYWdhaW5zdCB0aGUgbGlzdCBvZlxuICAgKiByZWdpc3RlcmVkIHJvdXRlcywgYW5kIGlmIHRoZXJlJ3MgYSBtYXRjaCwgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZ1xuICAgKiByb3V0ZSBhbG9uZyB3aXRoIGFueSBwYXJhbXMgZ2VuZXJhdGVkIGJ5IHRoZSBtYXRjaC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtVUkx9IG9wdGlvbnMudXJsXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5zYW1lT3JpZ2luIFRoZSByZXN1bHQgb2YgY29tcGFyaW5nIGB1cmwub3JpZ2luYFxuICAgKiAgICAgYWdhaW5zdCB0aGUgY3VycmVudCBvcmlnaW4uXG4gICAqIEBwYXJhbSB7UmVxdWVzdH0gb3B0aW9ucy5yZXF1ZXN0IFRoZSByZXF1ZXN0IHRvIG1hdGNoLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBvcHRpb25zLmV2ZW50IFRoZSBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIGByb3V0ZWAgYW5kIGBwYXJhbXNgIHByb3BlcnRpZXMuXG4gICAqICAgICBUaGV5IGFyZSBwb3B1bGF0ZWQgaWYgYSBtYXRjaGluZyByb3V0ZSB3YXMgZm91bmQgb3IgYHVuZGVmaW5lZGBcbiAgICogICAgIG90aGVyd2lzZS5cbiAgICovXG4gIGZpbmRNYXRjaGluZ1JvdXRlKHsgdXJsLCBzYW1lT3JpZ2luLCByZXF1ZXN0LCBldmVudCB9KSB7XG4gICAgY29uc3Qgcm91dGVzID0gdGhpcy5fcm91dGVzLmdldChyZXF1ZXN0Lm1ldGhvZCkgfHwgW107XG4gICAgZm9yIChjb25zdCByb3V0ZSBvZiByb3V0ZXMpIHtcbiAgICAgIGxldCBwYXJhbXM7XG4gICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHJvdXRlLm1hdGNoKHsgdXJsLCBzYW1lT3JpZ2luLCByZXF1ZXN0LCBldmVudCB9KTtcbiAgICAgIGlmIChtYXRjaFJlc3VsdCkge1xuICAgICAgICBwYXJhbXMgPSBtYXRjaFJlc3VsdDtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyYW1zKSAmJiBwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcGFyYW1zID0gdm9pZCAwO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoUmVzdWx0LmNvbnN0cnVjdG9yID09PSBPYmplY3QgJiYgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICBPYmplY3Qua2V5cyhtYXRjaFJlc3VsdCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcGFyYW1zID0gdm9pZCAwO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYXRjaFJlc3VsdCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICBwYXJhbXMgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcm91dGUsIHBhcmFtcyB9O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH1cbiAgLyoqXG4gICAqIERlZmluZSBhIGRlZmF1bHQgYGhhbmRsZXJgIHRoYXQncyBjYWxsZWQgd2hlbiBubyByb3V0ZXMgZXhwbGljaXRseVxuICAgKiBtYXRjaCB0aGUgaW5jb21pbmcgcmVxdWVzdC5cbiAgICpcbiAgICogRWFjaCBIVFRQIG1ldGhvZCAoJ0dFVCcsICdQT1NUJywgZXRjLikgZ2V0cyBpdHMgb3duIGRlZmF1bHQgaGFuZGxlci5cbiAgICpcbiAgICogV2l0aG91dCBhIGRlZmF1bHQgaGFuZGxlciwgdW5tYXRjaGVkIHJlcXVlc3RzIHdpbGwgZ28gYWdhaW5zdCB0aGVcbiAgICogbmV0d29yayBhcyBpZiB0aGVyZSB3ZXJlIG5vIHNlcnZpY2Ugd29ya2VyIHByZXNlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7d29ya2JveC1yb3V0aW5nfmhhbmRsZXJDYWxsYmFja30gaGFuZGxlciBBIGNhbGxiYWNrXG4gICAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgcmVzdWx0aW5nIGluIGEgUmVzcG9uc2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbWV0aG9kPSdHRVQnXSBUaGUgSFRUUCBtZXRob2QgdG8gYXNzb2NpYXRlIHdpdGggdGhpc1xuICAgKiBkZWZhdWx0IGhhbmRsZXIuIEVhY2ggbWV0aG9kIGhhcyBpdHMgb3duIGRlZmF1bHQuXG4gICAqL1xuICBzZXREZWZhdWx0SGFuZGxlcihoYW5kbGVyLCBtZXRob2QgPSBkZWZhdWx0TWV0aG9kKSB7XG4gICAgdGhpcy5fZGVmYXVsdEhhbmRsZXJNYXAuc2V0KG1ldGhvZCwgbm9ybWFsaXplSGFuZGxlcihoYW5kbGVyKSk7XG4gIH1cbiAgLyoqXG4gICAqIElmIGEgUm91dGUgdGhyb3dzIGFuIGVycm9yIHdoaWxlIGhhbmRsaW5nIGEgcmVxdWVzdCwgdGhpcyBgaGFuZGxlcmBcbiAgICogd2lsbCBiZSBjYWxsZWQgYW5kIGdpdmVuIGEgY2hhbmNlIHRvIHByb3ZpZGUgYSByZXNwb25zZS5cbiAgICpcbiAgICogQHBhcmFtIHt3b3JrYm94LXJvdXRpbmd+aGFuZGxlckNhbGxiYWNrfSBoYW5kbGVyIEEgY2FsbGJhY2tcbiAgICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZSByZXN1bHRpbmcgaW4gYSBSZXNwb25zZS5cbiAgICovXG4gIHNldENhdGNoSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy5fY2F0Y2hIYW5kbGVyID0gbm9ybWFsaXplSGFuZGxlcihoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgcm91dGUgd2l0aCB0aGUgcm91dGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3dvcmtib3gtcm91dGluZy5Sb3V0ZX0gcm91dGUgVGhlIHJvdXRlIHRvIHJlZ2lzdGVyLlxuICAgKi9cbiAgcmVnaXN0ZXJSb3V0ZShyb3V0ZSkge1xuICAgIGlmICghdGhpcy5fcm91dGVzLmhhcyhyb3V0ZS5tZXRob2QpKSB7XG4gICAgICB0aGlzLl9yb3V0ZXMuc2V0KHJvdXRlLm1ldGhvZCwgW10pO1xuICAgIH1cbiAgICB0aGlzLl9yb3V0ZXMuZ2V0KHJvdXRlLm1ldGhvZCkucHVzaChyb3V0ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGEgcm91dGUgd2l0aCB0aGUgcm91dGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3dvcmtib3gtcm91dGluZy5Sb3V0ZX0gcm91dGUgVGhlIHJvdXRlIHRvIHVucmVnaXN0ZXIuXG4gICAqL1xuICB1bnJlZ2lzdGVyUm91dGUocm91dGUpIHtcbiAgICBpZiAoIXRoaXMuX3JvdXRlcy5oYXMocm91dGUubWV0aG9kKSkge1xuICAgICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihcInVucmVnaXN0ZXItcm91dGUtYnV0LW5vdC1mb3VuZC13aXRoLW1ldGhvZFwiLCB7XG4gICAgICAgIG1ldGhvZDogcm91dGUubWV0aG9kXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgcm91dGVJbmRleCA9IHRoaXMuX3JvdXRlcy5nZXQocm91dGUubWV0aG9kKS5pbmRleE9mKHJvdXRlKTtcbiAgICBpZiAocm91dGVJbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLl9yb3V0ZXMuZ2V0KHJvdXRlLm1ldGhvZCkuc3BsaWNlKHJvdXRlSW5kZXgsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgV29ya2JveEVycm9yKFwidW5yZWdpc3Rlci1yb3V0ZS1yb3V0ZS1ub3QtcmVnaXN0ZXJlZFwiKTtcbiAgICB9XG4gIH1cbn1cblxuLypcbiAgQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xubGV0IGRlZmF1bHRSb3V0ZXI7XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIHNpbmdsZXRvbiBSb3V0ZXIgaW5zdGFuY2UgaWYgb25lIGRvZXMgbm90IGV4aXN0LiBJZiBvbmVcbiAqIGRvZXMgYWxyZWFkeSBleGlzdCwgdGhhdCBpbnN0YW5jZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybiB7Um91dGVyfVxuICovXG5jb25zdCBnZXRPckNyZWF0ZURlZmF1bHRSb3V0ZXIgPSAoKSA9PiB7XG4gICAgaWYgKCFkZWZhdWx0Um91dGVyKSB7XG4gICAgICAgIGRlZmF1bHRSb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG4gICAgICAgIC8vIFRoZSBoZWxwZXJzIHRoYXQgdXNlIHRoZSBkZWZhdWx0IFJvdXRlciBhc3N1bWUgdGhlc2UgbGlzdGVuZXJzIGV4aXN0LlxuICAgICAgICBkZWZhdWx0Um91dGVyLmFkZEZldGNoTGlzdGVuZXIoKTtcbiAgICAgICAgZGVmYXVsdFJvdXRlci5hZGRDYWNoZUxpc3RlbmVyKCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0Um91dGVyO1xufTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJSb3V0ZShjYXB0dXJlLCBoYW5kbGVyLCBtZXRob2QpIHtcbiAgbGV0IHJvdXRlO1xuICBpZiAodHlwZW9mIGNhcHR1cmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBjYXB0dXJlVXJsID0gbmV3IFVSTChjYXB0dXJlLCBsb2NhdGlvbi5ocmVmKTtcbiAgICBjb25zdCBtYXRjaENhbGxiYWNrID0gKHsgdXJsIH0pID0+IHtcbiAgICAgIHJldHVybiB1cmwuaHJlZiA9PT0gY2FwdHVyZVVybC5ocmVmO1xuICAgIH07XG4gICAgcm91dGUgPSBuZXcgUm91dGUobWF0Y2hDYWxsYmFjaywgaGFuZGxlciwgbWV0aG9kKTtcbiAgfSBlbHNlIGlmIChjYXB0dXJlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgcm91dGUgPSBuZXcgUmVnRXhwUm91dGUoY2FwdHVyZSwgaGFuZGxlciwgbWV0aG9kKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2FwdHVyZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcm91dGUgPSBuZXcgUm91dGUoY2FwdHVyZSwgaGFuZGxlciwgbWV0aG9kKTtcbiAgfSBlbHNlIGlmIChjYXB0dXJlIGluc3RhbmNlb2YgUm91dGUpIHtcbiAgICByb3V0ZSA9IGNhcHR1cmU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFdvcmtib3hFcnJvcihcInVuc3VwcG9ydGVkLXJvdXRlLXR5cGVcIiwge1xuICAgICAgbW9kdWxlTmFtZTogXCJ3b3JrYm94LXJvdXRpbmdcIixcbiAgICAgIGZ1bmNOYW1lOiBcInJlZ2lzdGVyUm91dGVcIixcbiAgICAgIHBhcmFtTmFtZTogXCJjYXB0dXJlXCJcbiAgICB9KTtcbiAgfVxuICBjb25zdCBkZWZhdWx0Um91dGVyID0gZ2V0T3JDcmVhdGVEZWZhdWx0Um91dGVyKCk7XG4gIGRlZmF1bHRSb3V0ZXIucmVnaXN0ZXJSb3V0ZShyb3V0ZSk7XG4gIHJldHVybiByb3V0ZTtcbn1cblxuLypcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXRcbiAgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuXG4qL1xuLyoqXG4gKiBSZW1vdmVzIGFueSBVUkwgc2VhcmNoIHBhcmFtZXRlcnMgdGhhdCBzaG91bGQgYmUgaWdub3JlZC5cbiAqXG4gKiBAcGFyYW0ge1VSTH0gdXJsT2JqZWN0IFRoZSBvcmlnaW5hbCBVUkwuXG4gKiBAcGFyYW0ge0FycmF5PFJlZ0V4cD59IGlnbm9yZVVSTFBhcmFtZXRlcnNNYXRjaGluZyBSZWdFeHBzIHRvIHRlc3QgYWdhaW5zdFxuICogZWFjaCBzZWFyY2ggcGFyYW1ldGVyIG5hbWUuIE1hdGNoZXMgbWVhbiB0aGF0IHRoZSBzZWFyY2ggcGFyYW1ldGVyIHNob3VsZCBiZVxuICogaWdub3JlZC5cbiAqIEByZXR1cm4ge1VSTH0gVGhlIFVSTCB3aXRoIGFueSBpZ25vcmVkIHNlYXJjaCBwYXJhbWV0ZXJzIHJlbW92ZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXByZWNhY2hpbmdcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlSWdub3JlZFNlYXJjaFBhcmFtcyh1cmxPYmplY3QsIGlnbm9yZVVSTFBhcmFtZXRlcnNNYXRjaGluZyA9IFtdKSB7XG4gICAgLy8gQ29udmVydCB0aGUgaXRlcmFibGUgaW50byBhbiBhcnJheSBhdCB0aGUgc3RhcnQgb2YgdGhlIGxvb3AgdG8gbWFrZSBzdXJlXG4gICAgLy8gZGVsZXRpb24gZG9lc24ndCBtZXNzIHVwIGl0ZXJhdGlvbi5cbiAgICBmb3IgKGNvbnN0IHBhcmFtTmFtZSBvZiBbLi4udXJsT2JqZWN0LnNlYXJjaFBhcmFtcy5rZXlzKCldKSB7XG4gICAgICAgIGlmIChpZ25vcmVVUkxQYXJhbWV0ZXJzTWF0Y2hpbmcuc29tZSgocmVnRXhwKSA9PiByZWdFeHAudGVzdChwYXJhbU5hbWUpKSkge1xuICAgICAgICAgICAgdXJsT2JqZWN0LnNlYXJjaFBhcmFtcy5kZWxldGUocGFyYW1OYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXJsT2JqZWN0O1xufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIEdlbmVyYXRvciBmdW5jdGlvbiB0aGF0IHlpZWxkcyBwb3NzaWJsZSB2YXJpYXRpb25zIG9uIHRoZSBvcmlnaW5hbCBVUkwgdG9cbiAqIGNoZWNrLCBvbmUgYXQgYSB0aW1lLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKlxuICogQHByaXZhdGVcbiAqIEBtZW1iZXJvZiB3b3JrYm94LXByZWNhY2hpbmdcbiAqL1xuZnVuY3Rpb24qIGdlbmVyYXRlVVJMVmFyaWF0aW9ucyh1cmwsIHsgaWdub3JlVVJMUGFyYW1ldGVyc01hdGNoaW5nID0gWy9edXRtXy8sIC9eZmJjbGlkJC9dLCBkaXJlY3RvcnlJbmRleCA9ICdpbmRleC5odG1sJywgY2xlYW5VUkxzID0gdHJ1ZSwgdXJsTWFuaXB1bGF0aW9uLCB9ID0ge30pIHtcbiAgICBjb25zdCB1cmxPYmplY3QgPSBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZik7XG4gICAgdXJsT2JqZWN0Lmhhc2ggPSAnJztcbiAgICB5aWVsZCB1cmxPYmplY3QuaHJlZjtcbiAgICBjb25zdCB1cmxXaXRob3V0SWdub3JlZFBhcmFtcyA9IHJlbW92ZUlnbm9yZWRTZWFyY2hQYXJhbXModXJsT2JqZWN0LCBpZ25vcmVVUkxQYXJhbWV0ZXJzTWF0Y2hpbmcpO1xuICAgIHlpZWxkIHVybFdpdGhvdXRJZ25vcmVkUGFyYW1zLmhyZWY7XG4gICAgaWYgKGRpcmVjdG9yeUluZGV4ICYmIHVybFdpdGhvdXRJZ25vcmVkUGFyYW1zLnBhdGhuYW1lLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0b3J5VVJMID0gbmV3IFVSTCh1cmxXaXRob3V0SWdub3JlZFBhcmFtcy5ocmVmKTtcbiAgICAgICAgZGlyZWN0b3J5VVJMLnBhdGhuYW1lICs9IGRpcmVjdG9yeUluZGV4O1xuICAgICAgICB5aWVsZCBkaXJlY3RvcnlVUkwuaHJlZjtcbiAgICB9XG4gICAgaWYgKGNsZWFuVVJMcykge1xuICAgICAgICBjb25zdCBjbGVhblVSTCA9IG5ldyBVUkwodXJsV2l0aG91dElnbm9yZWRQYXJhbXMuaHJlZik7XG4gICAgICAgIGNsZWFuVVJMLnBhdGhuYW1lICs9ICcuaHRtbCc7XG4gICAgICAgIHlpZWxkIGNsZWFuVVJMLmhyZWY7XG4gICAgfVxuICAgIGlmICh1cmxNYW5pcHVsYXRpb24pIHtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFVSTHMgPSB1cmxNYW5pcHVsYXRpb24oeyB1cmw6IHVybE9iamVjdCB9KTtcbiAgICAgICAgZm9yIChjb25zdCB1cmxUb0F0dGVtcHQgb2YgYWRkaXRpb25hbFVSTHMpIHtcbiAgICAgICAgICAgIHlpZWxkIHVybFRvQXR0ZW1wdC5ocmVmO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBQcmVjYWNoZVJvdXRlIGV4dGVuZHMgUm91dGUge1xuICAvKipcbiAgICogQHBhcmFtIHtQcmVjYWNoZUNvbnRyb2xsZXJ9IHByZWNhY2hlQ29udHJvbGxlciBBIGBQcmVjYWNoZUNvbnRyb2xsZXJgXG4gICAqIGluc3RhbmNlIHVzZWQgdG8gYm90aCBtYXRjaCByZXF1ZXN0cyBhbmQgcmVzcG9uZCB0byBmZXRjaCBldmVudHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyB0byBjb250cm9sIGhvdyByZXF1ZXN0cyBhcmUgbWF0Y2hlZFxuICAgKiBhZ2FpbnN0IHRoZSBsaXN0IG9mIHByZWNhY2hlZCBVUkxzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZGlyZWN0b3J5SW5kZXg9aW5kZXguaHRtbF0gVGhlIGBkaXJlY3RvcnlJbmRleGAgd2lsbFxuICAgKiBjaGVjayBjYWNoZSBlbnRyaWVzIGZvciBhIFVSTHMgZW5kaW5nIHdpdGggJy8nIHRvIHNlZSBpZiB0aGVyZSBpcyBhIGhpdCB3aGVuXG4gICAqIGFwcGVuZGluZyB0aGUgYGRpcmVjdG9yeUluZGV4YCB2YWx1ZS5cbiAgICogQHBhcmFtIHtBcnJheTxSZWdFeHA+fSBbb3B0aW9ucy5pZ25vcmVVUkxQYXJhbWV0ZXJzTWF0Y2hpbmc9Wy9edXRtXy8sIC9eZmJjbGlkJC9dXSBBblxuICAgKiBhcnJheSBvZiByZWdleCdzIHRvIHJlbW92ZSBzZWFyY2ggcGFyYW1zIHdoZW4gbG9va2luZyBmb3IgYSBjYWNoZSBtYXRjaC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jbGVhblVSTHM9dHJ1ZV0gVGhlIGBjbGVhblVSTHNgIG9wdGlvbiB3aWxsXG4gICAqIGNoZWNrIHRoZSBjYWNoZSBmb3IgdGhlIFVSTCB3aXRoIGEgYC5odG1sYCBhZGRlZCB0byB0aGUgZW5kIG9mIHRoZSBlbmQuXG4gICAqIEBwYXJhbSB7d29ya2JveC1wcmVjYWNoaW5nfnVybE1hbmlwdWxhdGlvbn0gW29wdGlvbnMudXJsTWFuaXB1bGF0aW9uXVxuICAgKiBUaGlzIGlzIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgdGFrZSBhIFVSTCBhbmQgcmV0dXJuIGFuIGFycmF5IG9mXG4gICAqIGFsdGVybmF0aXZlIFVSTHMgdGhhdCBzaG91bGQgYmUgY2hlY2tlZCBmb3IgcHJlY2FjaGUgbWF0Y2hlcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHByZWNhY2hlQ29udHJvbGxlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IG1hdGNoID0gKHsgcmVxdWVzdCB9KSA9PiB7XG4gICAgICBjb25zdCB1cmxzVG9DYWNoZUtleXMgPSBwcmVjYWNoZUNvbnRyb2xsZXIuZ2V0VVJMc1RvQ2FjaGVLZXlzKCk7XG4gICAgICBmb3IgKGNvbnN0IHBvc3NpYmxlVVJMIG9mIGdlbmVyYXRlVVJMVmFyaWF0aW9ucyhyZXF1ZXN0LnVybCwgb3B0aW9ucykpIHtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB1cmxzVG9DYWNoZUtleXMuZ2V0KHBvc3NpYmxlVVJMKTtcbiAgICAgICAgaWYgKGNhY2hlS2V5KSB7XG4gICAgICAgICAgY29uc3QgaW50ZWdyaXR5ID0gcHJlY2FjaGVDb250cm9sbGVyLmdldEludGVncml0eUZvckNhY2hlS2V5KGNhY2hlS2V5KTtcbiAgICAgICAgICByZXR1cm4geyBjYWNoZUtleSwgaW50ZWdyaXR5IH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIHN1cGVyKG1hdGNoLCBwcmVjYWNoZUNvbnRyb2xsZXIuc3RyYXRlZ3kpO1xuICB9XG59XG5cbi8qXG4gIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIEFkZCBhIGBmZXRjaGAgbGlzdGVuZXIgdG8gdGhlIHNlcnZpY2Ugd29ya2VyIHRoYXQgd2lsbFxuICogcmVzcG9uZCB0b1xuICogW25ldHdvcmsgcmVxdWVzdHNde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2aWNlX1dvcmtlcl9BUEkvVXNpbmdfU2VydmljZV9Xb3JrZXJzI0N1c3RvbV9yZXNwb25zZXNfdG9fcmVxdWVzdHN9XG4gKiB3aXRoIHByZWNhY2hlZCBhc3NldHMuXG4gKlxuICogUmVxdWVzdHMgZm9yIGFzc2V0cyB0aGF0IGFyZW4ndCBwcmVjYWNoZWQsIHRoZSBgRmV0Y2hFdmVudGAgd2lsbCBub3QgYmVcbiAqIHJlc3BvbmRlZCB0bywgYWxsb3dpbmcgdGhlIGV2ZW50IHRvIGZhbGwgdGhyb3VnaCB0byBvdGhlciBgZmV0Y2hgIGV2ZW50XG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBTZWUgdGhlIHtAbGluayB3b3JrYm94LXByZWNhY2hpbmcuUHJlY2FjaGVSb3V0ZX1cbiAqIG9wdGlvbnMuXG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3gtcHJlY2FjaGluZ1xuICovXG5mdW5jdGlvbiBhZGRSb3V0ZShvcHRpb25zKSB7XG4gICAgY29uc3QgcHJlY2FjaGVDb250cm9sbGVyID0gZ2V0T3JDcmVhdGVQcmVjYWNoZUNvbnRyb2xsZXIoKTtcbiAgICBjb25zdCBwcmVjYWNoZVJvdXRlID0gbmV3IFByZWNhY2hlUm91dGUocHJlY2FjaGVDb250cm9sbGVyLCBvcHRpb25zKTtcbiAgICByZWdpc3RlclJvdXRlKHByZWNhY2hlUm91dGUpO1xufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIEFkZHMgaXRlbXMgdG8gdGhlIHByZWNhY2hlIGxpc3QsIHJlbW92aW5nIGFueSBkdXBsaWNhdGVzIGFuZFxuICogc3RvcmVzIHRoZSBmaWxlcyBpbiB0aGVcbiAqIHtAbGluayB3b3JrYm94LWNvcmUuY2FjaGVOYW1lc3xcInByZWNhY2hlIGNhY2hlXCJ9IHdoZW4gdGhlIHNlcnZpY2VcbiAqIHdvcmtlciBpbnN0YWxscy5cbiAqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlxuICpcbiAqIFBsZWFzZSBub3RlOiBUaGlzIG1ldGhvZCAqKndpbGwgbm90Kiogc2VydmUgYW55IG9mIHRoZSBjYWNoZWQgZmlsZXMgZm9yIHlvdS5cbiAqIEl0IG9ubHkgcHJlY2FjaGVzIGZpbGVzLiBUbyByZXNwb25kIHRvIGEgbmV0d29yayByZXF1ZXN0IHlvdSBjYWxsXG4gKiB7QGxpbmsgd29ya2JveC1wcmVjYWNoaW5nLmFkZFJvdXRlfS5cbiAqXG4gKiBJZiB5b3UgaGF2ZSBhIHNpbmdsZSBhcnJheSBvZiBmaWxlcyB0byBwcmVjYWNoZSwgeW91IGNhbiBqdXN0IGNhbGxcbiAqIHtAbGluayB3b3JrYm94LXByZWNhY2hpbmcucHJlY2FjaGVBbmRSb3V0ZX0uXG4gKlxuICogQHBhcmFtIHtBcnJheTxPYmplY3R8c3RyaW5nPn0gW2VudHJpZXM9W11dIEFycmF5IG9mIGVudHJpZXMgdG8gcHJlY2FjaGUuXG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3gtcHJlY2FjaGluZ1xuICovXG5mdW5jdGlvbiBwcmVjYWNoZShlbnRyaWVzKSB7XG4gICAgY29uc3QgcHJlY2FjaGVDb250cm9sbGVyID0gZ2V0T3JDcmVhdGVQcmVjYWNoZUNvbnRyb2xsZXIoKTtcbiAgICBwcmVjYWNoZUNvbnRyb2xsZXIucHJlY2FjaGUoZW50cmllcyk7XG59XG5cbi8qXG4gIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcblxuICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGVcbiAgbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULlxuKi9cbi8qKlxuICogVGhpcyBtZXRob2Qgd2lsbCBhZGQgZW50cmllcyB0byB0aGUgcHJlY2FjaGUgbGlzdCBhbmQgYWRkIGEgcm91dGUgdG9cbiAqIHJlc3BvbmQgdG8gZmV0Y2ggZXZlbnRzLlxuICpcbiAqIFRoaXMgaXMgYSBjb252ZW5pZW5jZSBtZXRob2QgdGhhdCB3aWxsIGNhbGxcbiAqIHtAbGluayB3b3JrYm94LXByZWNhY2hpbmcucHJlY2FjaGV9IGFuZFxuICoge0BsaW5rIHdvcmtib3gtcHJlY2FjaGluZy5hZGRSb3V0ZX0gaW4gYSBzaW5nbGUgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdHxzdHJpbmc+fSBlbnRyaWVzIEFycmF5IG9mIGVudHJpZXMgdG8gcHJlY2FjaGUuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFNlZSB0aGVcbiAqIHtAbGluayB3b3JrYm94LXByZWNhY2hpbmcuUHJlY2FjaGVSb3V0ZX0gb3B0aW9ucy5cbiAqXG4gKiBAbWVtYmVyb2Ygd29ya2JveC1wcmVjYWNoaW5nXG4gKi9cbmZ1bmN0aW9uIHByZWNhY2hlQW5kUm91dGUoZW50cmllcywgb3B0aW9ucykge1xuICAgIHByZWNhY2hlKGVudHJpZXMpO1xuICAgIGFkZFJvdXRlKG9wdGlvbnMpO1xufVxuXG4vKlxuICBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG5cbiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlXG4gIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdFxuICBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiovXG4vKipcbiAqIENsYWltIGFueSBjdXJyZW50bHkgYXZhaWxhYmxlIGNsaWVudHMgb25jZSB0aGUgc2VydmljZSB3b3JrZXJcbiAqIGJlY29tZXMgYWN0aXZlLiBUaGlzIGlzIG5vcm1hbGx5IHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgc2tpcFdhaXRpbmcoKWAuXG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3gtY29yZVxuICovXG5mdW5jdGlvbiBjbGllbnRzQ2xhaW0oKSB7XG4gICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdhY3RpdmF0ZScsICgpID0+IHNlbGYuY2xpZW50cy5jbGFpbSgpKTtcbn1cblxuY29uc29sZS5pbmZvKGBTZXJ2aWNlIHdvcmtlciBidWlsZCAke1wiMTkvMDgvMjAyNCwgMTI6MDVcIn1gKTtcbmNvbnN0IHNlbmQgPSBhc3luYyAodHlwZSwgbWVzc2FnZSkgPT4ge1xuICBjb25zdCBjbGllbnRzID0gYXdhaXQgc2VsZi5jbGllbnRzLm1hdGNoQWxsKHsgaW5jbHVkZVVuY29udHJvbGxlZDogdHJ1ZSwgdHlwZTogXCJ3aW5kb3dcIiB9KTtcbiAgY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcbiAgICBjbGllbnQucG9zdE1lc3NhZ2Uoe1xuICAgICAgdHlwZSxcbiAgICAgIG1lc3NhZ2VcbiAgICB9KTtcbiAgfSk7XG59O1xuY29uc3Qgc2VuZExvZyA9IChtZXNzYWdlKSA9PiB7XG4gIGNvbnNvbGUuaW5mbyhtZXNzYWdlKTtcbiAgcmV0dXJuIHNlbmQoXCJMT0dcIiwgbWVzc2FnZSk7XG59O1xuY29uc3Qgc2hvd0JhZGdlID0gKGNvdW50KSA9PiB7XG4gIGlmIChcInNldEFwcEJhZGdlXCIgaW4gc2VsZi5uYXZpZ2F0b3IpIHtcbiAgICByZXR1cm4gc2VsZi5uYXZpZ2F0b3Iuc2V0QXBwQmFkZ2UoY291bnQpLnRoZW4oKCkgPT4gc2VuZExvZyhcIkJhZGdlIGRpc3BsYXllZFwiKSk7XG4gIH1cbiAgc2VuZExvZyhcIkJhZGdlIEFQSSBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59O1xuY29uc3QgcmVnaXN0ZXJQdXNoU3Vic2NyaXB0aW9uID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoXCJwdXNoTWFuYWdlclwiIGluIHNlbGYucmVnaXN0cmF0aW9uICYmIHR5cGVvZiBzZWxmLnJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGF3YWl0IHNlbmRMb2coXCJSZWdpc3RlcmluZyBhIHB1c2ggc3Vic2NyaXB0aW9uXCIpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24yID0gYXdhaXQgc2VsZi5yZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHtcbiAgICAgICAgdXNlclZpc2libGVPbmx5OiB0cnVlLFxuICAgICAgICBhcHBsaWNhdGlvblNlcnZlcktleTogXCJCR2RMNTk1T1lmbjB3aFhPSlNKZnJLc1F1MGhFNFhEbTNtSF9GOGEwMGNkT3FiUFhjQ3lUbGpQV3VJVV9pbkVKTllrbWpDVXI5ZUFtaUlKbnZta0t4VllcIlxuICAgICAgfSk7XG4gICAgICBhd2FpdCBzZW5kTG9nKGBTdWJzY3JpYmVkIHN1Y2Nlc3NmdWxseWApO1xuICAgICAgYXdhaXQgc2VuZChcIlNVQlwiKTtcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb24yO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGF3YWl0IHNlbmRMb2coYFVuYWJsZSB0byBzdWJzY3JpYmUuICR7ZX1gKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuY29uc3Qgc2hvd05vdGlmaWNhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIikge1xuICAgIHNlbmRMb2coXCJObyBwZXJtaXNzaW9uIHRvIHNob3cgbm90aWZpY2F0aW9uc1wiKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBhd2FpdCBzZWxmLnJlZ2lzdHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKFwiTG9jYWwgTm90aWZpY2F0aW9uXCIsIHtcbiAgICAgIGJvZHk6IFwiVGhpcyB3YXMgc2VudCBmcm9tIHNlcnZpY2Ugd29ya2VyLCB3aXRob3V0IHVzaW5nIFB1c2ggQVBJXCIsXG4gICAgICBpY29uOiBcIi4vaWNvbi0xOTIucG5nXCJcbiAgICB9KTtcbiAgICBzZW5kTG9nKFwiTG9jYWwgbm90aWZpY2F0aW9uIGlzIHNlbnQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgc2VuZExvZyhgRXJyb3Igc2VuZGluZyBsb2NhbCBub3RpZmljYXRpb246ICR7ZX1gKTtcbiAgfVxufTtcbmNvbnN0IHJlcXVlc3RQdXNoID0gYXN5bmMgKHN1YnNjcmlwdGlvbjIpID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goXCJodHRwczovL3JvY2tzdGFyLXB1c2guZ2xpdGNoLm1lL3NlbmQtcHVzaFwiLCB7XG4gICAgbWV0aG9kOiBcInBvc3RcIixcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzdWJzY3JpcHRpb24yLCBudWxsLCAyKSxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cbiAgfSk7XG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCByZXN1bHQudGV4dCgpO1xuICBhd2FpdCBzZW5kTG9nKGBQdXNoIHJlcXVlc3QgcmVzdWx0OiAke21lc3NhZ2V9YCk7XG59O1xuc2VsZi5za2lwV2FpdGluZygpO1xuY2xpZW50c0NsYWltKCk7XG5wcmVjYWNoZUFuZFJvdXRlKHNlbGYuX19XQl9NQU5JRkVTVCk7XG5sZXQgc3Vic2NyaXB0aW9uID0gbnVsbDtcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImFjdGl2YXRlXCIsIGFzeW5jICgpID0+IHtcbiAgc2VuZExvZyhcIlNlcnZpY2Ugd29ya2VyIGlzIHJ1bm5pbmdcIik7XG4gIHN1YnNjcmlwdGlvbiA9IGF3YWl0IHJlZ2lzdGVyUHVzaFN1YnNjcmlwdGlvbigpO1xufSk7XG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQuZGF0YT8udHlwZSA9PT0gXCJTRU5EX05PVElGSUNBVElPTlwiKSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICBwcm9taXNlcy5wdXNoKHNob3dOb3RpZmljYXRpb24oKSk7XG4gICAgaWYgKFwic2V0QXBwQmFkZ2VcIiBpbiBzZWxmLm5hdmlnYXRvcikge1xuICAgICAgcHJvbWlzZXMucHVzaChzZWxmLm5hdmlnYXRvci5zZXRBcHBCYWRnZSgxKSk7XG4gICAgfVxuICAgIGV2ZW50LndhaXRVbnRpbChQcm9taXNlLmFsbChwcm9taXNlcykpO1xuICB9XG4gIGlmIChldmVudC5kYXRhPy50eXBlID09PSBcIlJFUVVFU1RfUFVTSFwiKSB7XG4gICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgZXZlbnQud2FpdFVudGlsKHJlcXVlc3RQdXNoKHN1YnNjcmlwdGlvbikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC53YWl0VW50aWwoc2VuZExvZyhcIlVuYWJsZSB0byByZXF1ZXN0IGEgcHVzaDogbm8gc3Vic2NyaXB0aW9uXCIpKTtcbiAgICB9XG4gIH1cbiAgaWYgKGV2ZW50LmRhdGE/LnR5cGUgPT09IFwiQVBQX09QRU5cIikge1xuICAgIGlmIChcImNsZWFyQXBwQmFkZ2VcIiBpbiBzZWxmLm5hdmlnYXRvcikge1xuICAgICAgZXZlbnQud2FpdFVudGlsKHNlbGYubmF2aWdhdG9yLmNsZWFyQXBwQmFkZ2UoKSk7XG4gICAgfVxuICB9XG59KTtcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcInB1c2hcIiwgKGV2ZW50KSA9PiB7XG4gIHNlbmRMb2coXCJSZWNlaXZlZCBhIHB1c2ggbWVzc2FnZVwiKTtcbiAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgY29uc3QgYmFkZ2VQcm9taXNlID0gc2hvd0JhZGdlKDEpO1xuICBwcm9taXNlcy5wdXNoKGJhZGdlUHJvbWlzZSk7XG4gIGNvbnN0IHsgdGl0bGUgPSBcIkVtcHR5IG1lc3NhZ2VcIiwgYm9keSA9IFwiRW1wdHkgbWVzc2FnZVwiIH0gPSBldmVudC5kYXRhPy5qc29uKCkgfHwge307XG4gIGNvbnN0IG5vdGlmaWNhdGlvblByb21pc2UgPSBzZWxmLnJlZ2lzdHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKHRpdGxlLCB7IGJvZHkgfSk7XG4gIHByb21pc2VzLnB1c2gobm90aWZpY2F0aW9uUHJvbWlzZSk7XG4gIGNvbnN0IGFsbCA9IFByb21pc2UuYWxsKHByb21pc2VzKS5jYXRjaCgoZSkgPT4gc2VuZExvZyhgUHVzaCBwcm9jZXNzaW5nIGZhaWxlZC4gJHtlfWApKTtcbiAgZXZlbnQud2FpdFVudGlsKGFsbCk7XG59KTsiXSwKICAibWFwcGluZ3MiOiAiQUFDQSxHQUFJLENBQ0EsS0FBSyxv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QUEyQkssQ0FBQyxFQUFFLENBQUMsRUFDdEYvSixFQUFNLFVBQVUwSyxDQUFHLENBQ3JCLENBQUMiLAogICJuYW1lcyI6IFsiZmFsbGJhY2siLCAiY29kZSIsICJhcmdzIiwgIm1zZyIsICJtZXNzYWdlR2VuZXJhdG9yIiwgIldvcmtib3hFcnJvciIsICJlcnJvckNvZGUiLCAiZGV0YWlscyIsICJtZXNzYWdlIiwgIl9jYWNoZU5hbWVEZXRhaWxzIiwgIl9jcmVhdGVDYWNoZU5hbWUiLCAiY2FjaGVOYW1lIiwgInZhbHVlIiwgImVhY2hDYWNoZU5hbWVEZXRhaWwiLCAiZm4iLCAia2V5IiwgImNhY2hlTmFtZXMiLCAidXNlckNhY2hlTmFtZSIsICJ3YWl0VW50aWwiLCAiZXZlbnQiLCAiYXN5bmNGbiIsICJyZXR1cm5Qcm9taXNlIiwgIlJFVklTSU9OX1NFQVJDSF9QQVJBTSIsICJjcmVhdGVDYWNoZUtleSIsICJlbnRyeSIsICJXb3JrYm94RXJyb3IiLCAidXJsT2JqZWN0IiwgInJldmlzaW9uIiwgInVybCIsICJjYWNoZUtleVVSTCIsICJvcmlnaW5hbFVSTCIsICJQcmVjYWNoZUluc3RhbGxSZXBvcnRQbHVnaW4iLCAicmVxdWVzdCIsICJzdGF0ZSIsICJjYWNoZWRSZXNwb25zZSIsICJQcmVjYWNoZUNhY2hlS2V5UGx1Z2luIiwgInByZWNhY2hlQ29udHJvbGxlciIsICJwYXJhbXMiLCAiY2FjaGVLZXkiLCAic3VwcG9ydFN0YXR1cyIsICJjYW5Db25zdHJ1Y3RSZXNwb25zZUZyb21Cb2R5U3RyZWFtIiwgInRlc3RSZXNwb25zZSIsICJjb3B5UmVzcG9uc2UiLCAicmVzcG9uc2UiLCAibW9kaWZpZXIiLCAib3JpZ2luIiwgImNsb25lZFJlc3BvbnNlIiwgIm1vZGlmaWVkUmVzcG9uc2VJbml0IiwgImJvZHkiLCAiZ2V0RnJpZW5kbHlVUkwiLCAic3RyaXBQYXJhbXMiLCAiZnVsbFVSTCIsICJpZ25vcmVQYXJhbXMiLCAic3RyaXBwZWRVUkwiLCAicGFyYW0iLCAiY2FjaGVNYXRjaElnbm9yZVBhcmFtcyIsICJjYWNoZSIsICJtYXRjaE9wdGlvbnMiLCAic3RyaXBwZWRSZXF1ZXN0VVJMIiwgImtleXNPcHRpb25zIiwgImNhY2hlS2V5cyIsICJzdHJpcHBlZENhY2hlS2V5VVJMIiwgIkRlZmVycmVkIiwgInJlc29sdmUiLCAicmVqZWN0IiwgInF1b3RhRXJyb3JDYWxsYmFja3MiLCAiZXhlY3V0ZVF1b3RhRXJyb3JDYWxsYmFja3MiLCAiY2FsbGJhY2siLCAidGltZW91dCIsICJtcyIsICJ0b1JlcXVlc3QiLCAiaW5wdXQiLCAiU3RyYXRlZ3lIYW5kbGVyIiwgInN0cmF0ZWd5IiwgIm9wdGlvbnMiLCAicGx1Z2luIiwgInBvc3NpYmxlUHJlbG9hZFJlc3BvbnNlIiwgIm9yaWdpbmFsUmVxdWVzdCIsICJjYiIsICJlcnIiLCAicGx1Z2luRmlsdGVyZWRSZXF1ZXN0IiwgImZldGNoUmVzcG9uc2UiLCAiZXJyb3IiLCAicmVzcG9uc2VDbG9uZSIsICJrZXkiLCAiY2FjaGVOYW1lIiwgImVmZmVjdGl2ZVJlcXVlc3QiLCAibXVsdGlNYXRjaE9wdGlvbnMiLCAicmVzcG9uc2VUb0NhY2hlIiwgImhhc0NhY2hlVXBkYXRlQ2FsbGJhY2siLCAib2xkUmVzcG9uc2UiLCAibW9kZSIsICJuYW1lIiwgInN0YXRlZnVsUGFyYW0iLCAicHJvbWlzZSIsICJwbHVnaW5zVXNlZCIsICJTdHJhdGVneSIsICJjYWNoZU5hbWVzIiwgInJlc3BvbnNlRG9uZSIsICJoYW5kbGVyIiwgImhhbmRsZXJEb25lIiwgIndhaXRVbnRpbEVycm9yIiwgIlByZWNhY2hlU3RyYXRlZ3kiLCAiaW50ZWdyaXR5SW5NYW5pZmVzdCIsICJpbnRlZ3JpdHlJblJlcXVlc3QiLCAibm9JbnRlZ3JpdHlDb25mbGljdCIsICJkZWZhdWx0UGx1Z2luSW5kZXgiLCAiY2FjaGVXaWxsVXBkYXRlUGx1Z2luQ291bnQiLCAiaW5kZXgiLCAiUHJlY2FjaGVDb250cm9sbGVyIiwgInBsdWdpbnMiLCAiZmFsbGJhY2tUb05ldHdvcmsiLCAiZW50cmllcyIsICJ1cmxzVG9XYXJuQWJvdXQiLCAiY2FjaGVNb2RlIiwgIndhcm5pbmdNZXNzYWdlIiwgImluc3RhbGxSZXBvcnRQbHVnaW4iLCAiaW50ZWdyaXR5IiwgInVwZGF0ZWRVUkxzIiwgIm5vdFVwZGF0ZWRVUkxzIiwgImN1cnJlbnRseUNhY2hlZFJlcXVlc3RzIiwgImV4cGVjdGVkQ2FjaGVLZXlzIiwgImRlbGV0ZWRVUkxzIiwgImdldE9yQ3JlYXRlUHJlY2FjaGVDb250cm9sbGVyIiwgImRlZmF1bHRNZXRob2QiLCAibm9ybWFsaXplSGFuZGxlciIsICJSb3V0ZSIsICJtYXRjaCIsICJtZXRob2QiLCAiUmVnRXhwUm91dGUiLCAicmVnRXhwIiwgInJlc3VsdCIsICJSb3V0ZXIiLCAicmVzcG9uc2VQcm9taXNlIiwgInBheWxvYWQiLCAicmVxdWVzdFByb21pc2VzIiwgInNhbWVPcmlnaW4iLCAicm91dGUiLCAiY2F0Y2hIYW5kbGVyIiwgImNhdGNoRXJyIiwgInJvdXRlcyIsICJtYXRjaFJlc3VsdCIsICJyb3V0ZUluZGV4IiwgImRlZmF1bHRSb3V0ZXIiLCAiZ2V0T3JDcmVhdGVEZWZhdWx0Um91dGVyIiwgInJlZ2lzdGVyUm91dGUiLCAiY2FwdHVyZSIsICJjYXB0dXJlVXJsIiwgIm1hdGNoQ2FsbGJhY2siLCAicmVtb3ZlSWdub3JlZFNlYXJjaFBhcmFtcyIsICJpZ25vcmVVUkxQYXJhbWV0ZXJzTWF0Y2hpbmciLCAicGFyYW1OYW1lIiwgImdlbmVyYXRlVVJMVmFyaWF0aW9ucyIsICJkaXJlY3RvcnlJbmRleCIsICJjbGVhblVSTHMiLCAidXJsTWFuaXB1bGF0aW9uIiwgInVybFdpdGhvdXRJZ25vcmVkUGFyYW1zIiwgImRpcmVjdG9yeVVSTCIsICJjbGVhblVSTCIsICJhZGRpdGlvbmFsVVJMcyIsICJ1cmxUb0F0dGVtcHQiLCAiUHJlY2FjaGVSb3V0ZSIsICJ1cmxzVG9DYWNoZUtleXMiLCAicG9zc2libGVVUkwiLCAiYWRkUm91dGUiLCAicHJlY2FjaGVSb3V0ZSIsICJwcmVjYWNoZSIsICJwcmVjYWNoZUFuZFJvdXRlIiwgImNsaWVudHNDbGFpbSIsICJzZW5kIiwgInR5cGUiLCAibWVzc2FnZSIsICJjbGllbnQiLCAic2VuZExvZyIsICJzaG93QmFkZ2UiLCAiY291bnQiLCAicmVnaXN0ZXJQdXNoU3Vic2NyaXB0aW9uIiwgInN1YnNjcmlwdGlvbjIiLCAiZSIsICJzaG93Tm90aWZpY2F0aW9uIiwgInJlcXVlc3RQdXNoIiwgInN1YnNjcmlwdGlvbiIsICJfYSIsICJfYiIsICJfYyIsICJwcm9taXNlcyIsICJiYWRnZVByb21pc2UiLCAidGl0bGUiLCAibm90aWZpY2F0aW9uUHJvbWlzZSIsICJhbGwiXQp9Cg==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZS13b3JrZXIubWpzIiwic291cmNlcyI6W10sInNvdXJjZXNDb250ZW50IjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiJ9
